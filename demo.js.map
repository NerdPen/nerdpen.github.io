{"version":3,"file":"demo.js","mappings":"MAAA,IACIA,EADAC,EAAQ,GAERC,EAASC,SAASC,eAAe,UACjCC,EAAW,CACPC,MAAO,WACPC,OAAQ,WACRC,WAAY,WAEhBC,EAAc,CACVC,OAAQ,CACJC,OAAQ,CACJC,QAAS,eACTC,YAAa,QAEjBC,eAAgB,CACZF,QAAS,uBACTC,YAAa,cAEjBE,IAAK,CACDH,QAAS,YACTC,YAAa,UAGrBG,OAAQ,CACJC,OAAQ,CACJC,MAAO,OACPC,OAAQ,OACRC,MAAO,SACPC,YAAa,WAEjBC,MAAO,CACHF,MAAO,OACPC,YAAa,SAEjBE,MAAO,CACHH,MAAO,UACPC,YAAa,WAEjBG,QAAS,CACLJ,MAAO,UACPC,YAAa,aAIzBI,EAAiB,CACbf,OAAQ,CACJK,IAAK,CACDH,QAAS,cACTC,YAAa,UAGrBG,OAAQ,CACJC,OAAQ,CACJC,MAAO,OACPC,OAAQ,OACRC,MAAO,SACPC,YAAa,WAEjBC,MAAO,CACHF,MAAO,OACPC,YAAa,SAEjBE,MAAO,CACHH,MAAO,UACPC,YAAa,WAEjBG,QAAS,CACLJ,MAAO,UACPC,YAAa,aAU7B,SAASK,EAAWC,GACX1B,EAAM2B,aAAwBC,IAAd5B,EAAM0B,IAE3B1B,EAAM6B,SAAQ,CAACC,EAAMC,KACbA,IAAUL,GACV3B,EAAc+B,EACd/B,EAAYiC,UAAUC,IAAI,UACf,IAAPP,GAShB,WACI,MAAMQ,EAAanC,EAAYoC,cAAc,UAC7CD,EAAWE,MAAQhC,EAASC,MAE5B,MAAMgC,EAActC,EAAYoC,cAAc,WAC9CE,EAAYD,MAAQhC,EAASE,OAELP,EAAYoC,cAAc,eAClCC,MAAQhC,EAASG,WAEjC,MAAM+B,EAAavC,EAAYoC,cAAc,eAC7CG,EAAWF,MAAQG,KAAKC,UAAUhC,OAAaoB,EAAW,GAE1D,MAAMa,EAAgB1C,EAAYoC,cAAc,kBAChDM,EAAcL,MAAQG,KAAKC,UAAUhB,OAAgBI,EAAW,GAE1C7B,EAAYoC,cAAc,kBAClCO,iBAAiB,SAAUC,IACrCvC,EAASC,MAAQ6B,EAAWE,MAC5BhC,EAASE,OAAS+B,EAAYD,MAE9BQ,OAAOC,WAAWzC,SACdA,EAASC,MACTD,EAASE,OACTF,EAASG,YAGbC,EAAc+B,KAAKO,MAAMR,EAAWF,OACpCX,EAAW,EAAE,IAGG1B,EAAYoC,cAAc,gBAClCO,iBAAiB,SAAUC,IACnCvC,EAASC,MAAQ6B,EAAWE,MAC5BhC,EAASE,OAAS+B,EAAYD,MAE9BQ,OAAOC,WAAWzC,SACdA,EAASC,MACTD,EAASE,OACTF,EAASG,YAGbiB,EAAiBe,KAAKO,MAAML,EAAcL,OAC1CX,EAAW,EAAE,GAErB,CAtD0BsB,GACH,IAAPrB,IAwDW3B,EAAYoC,cAAc,mBAClCO,iBAAiB,SAAUC,IACtCC,OAAOC,WAAWG,KAAKC,aAAaC,IAChCjD,EAAOkD,UAAYZ,KAAKC,UAAUU,EAAQ,KAAM,EAAE,GACrD,IAGLN,OAAOC,WAAWG,KAAKI,MAAM5C,GAC7BoC,OAAOC,WAAWG,KAAKK,UAAUH,IAC7BjD,EAAOkD,UAAYZ,KAAKC,UAAUU,EAAQ,KAAM,EAAE,KAhEnC,IAAPxB,IAsEZkB,OAAOC,WAAW/B,IAAIsC,MAAM5B,GAC5BoB,OAAOC,WAAW/B,IAAIwC,eAClBpD,SAASC,eAAe,aAAaiC,MAAMmB,eAE/CX,OAAOC,WAAW/B,IAAIuC,UAAUH,IAC5BjD,EAAOkD,UAAYZ,KAAKC,UAAUU,EAAQ,KAAM,EAAE,IAG3BnD,EAAYoC,cAAc,uBAClCO,iBAAiB,SAAUC,IAC1CC,OAAOC,WAAW/B,IAAI0C,iBAAiBN,IACnCjD,EAAOkD,UAAYZ,KAAKC,UAAUU,EAAQ,KAAM,EAAE,GACpD,MAhFEpB,EAAKE,UAAUyB,OAAO,SAC1B,GAER,CAiFAvD,SAASwC,iBAAiB,oBAAoB,KAnG1C,GAAGb,QAAQ6B,KAAKxD,SAASyD,iBAAiB,UAAW7B,IACjD9B,EAAM4D,KAAK9B,EAAK,IAoGpBL,EAAW,EAAE,G","sources":["webpack://91app-payment-sdk/./wwwroot/index.js"],"sourcesContent":["let steps = [],\n    currentStep,\n    logger = document.getElementById('logger'),\n    setupSDK = {\n        appId: '12132321',\n        appKey: '0cbfd82c',\n        serverType: 'sandbox',\n    },\n    setupConfig = {\n        fields: {\n            number: {\n                element: '#card-number',\n                placeholder: '信用卡號',\n            },\n            expirationDate: {\n                element: '#card-expirationDate',\n                placeholder: '有效期限 MM/YY',\n            },\n            ccv: {\n                element: '#card-ccv',\n                placeholder: '背面末三碼',\n            },\n        },\n        styles: {\n            normal: {\n                width: '100%',\n                height: '40px',\n                color: 'orange',\n                borderColor: '#DDDDDD',\n            },\n            focus: {\n                color: 'pink',\n                borderColor: 'green',\n            },\n            error: {\n                color: '#FF5353',\n                borderColor: '#FF5353',\n            },\n            success: {\n                color: '#000000',\n                borderColor: '#DDDDDD',\n            },\n        },\n    },\n    setupCCVConfig = {\n        fields: {\n            ccv: {\n                element: '#direct-ccv',\n                placeholder: '背面末三碼',\n            },\n        },\n        styles: {\n            normal: {\n                width: '100%',\n                height: '60px',\n                color: 'orange',\n                borderColor: '#DDDDDD',\n            },\n            focus: {\n                color: 'pink',\n                borderColor: 'green',\n            },\n            error: {\n                color: '#FF5353',\n                borderColor: '#FF5353',\n            },\n            success: {\n                color: '#000000',\n                borderColor: '#DDDDDD',\n            },\n        },\n    };\n\nfunction initStep() {\n    [].forEach.call(document.querySelectorAll('.step'), (step) => {\n        steps.push(step);\n    });\n}\nfunction changeStep(id) {\n    if (!steps.length || steps[id] === undefined) return;\n\n    steps.forEach((step, index) => {\n        if (index === id) {\n            currentStep = step;\n            currentStep.classList.add('active');\n            if (id === 0) initSetupSDK();\n            if (id === 1) initCreditCard();\n            if (id === 2) initCCV();\n        } else {\n            step.classList.remove('active');\n        }\n    });\n}\n\nfunction initSetupSDK() {\n    const appIdField = currentStep.querySelector('#appId');\n    appIdField.value = setupSDK.appId;\n\n    const appKeyField = currentStep.querySelector('#appKey');\n    appKeyField.value = setupSDK.appKey;\n\n    const serverTypeField = currentStep.querySelector('#serverType');\n    serverTypeField.value = setupSDK.serverType;\n\n    const setupField = currentStep.querySelector('#setupField');\n    setupField.value = JSON.stringify(setupConfig, undefined, 6);\n\n    const setupCCVField = currentStep.querySelector('#setupCCVField');\n    setupCCVField.value = JSON.stringify(setupCCVConfig, undefined, 6);\n\n    const setupFieldBtn = currentStep.querySelector('#setupFieldBtn');\n    setupFieldBtn.addEventListener('click', (e) => {\n        setupSDK.appId = appIdField.value;\n        setupSDK.appKey = appKeyField.value;\n\n        window.PaymentSDK.setupSDK(\n            setupSDK.appId,\n            setupSDK.appKey,\n            setupSDK.serverType\n        );\n\n        setupConfig = JSON.parse(setupField.value);\n        changeStep(1);\n    });\n\n    const setupCCVBtn = currentStep.querySelector('#setupCCVBtn');\n    setupCCVBtn.addEventListener('click', (e) => {\n        setupSDK.appId = appIdField.value;\n        setupSDK.appKey = appKeyField.value;\n\n        window.PaymentSDK.setupSDK(\n            setupSDK.appId,\n            setupSDK.appKey,\n            setupSDK.serverType\n        );\n\n        setupCCVConfig = JSON.parse(setupCCVField.value);\n        changeStep(2);\n    });\n}\n\nfunction initCreditCard() {\n    const getTxnTokenBtn = currentStep.querySelector('#getTxnTokenBtn');\n    getTxnTokenBtn.addEventListener('click', (e) => {\n        window.PaymentSDK.card.getTxnToken((result) => {\n            logger.innerHTML = JSON.stringify(result, null, 4);\n        })\n    });\n\n    window.PaymentSDK.card.setup(setupConfig);\n    window.PaymentSDK.card.onUpdate((result) => {\n        logger.innerHTML = JSON.stringify(result, null, 4);\n    })\n    \n}\n\nfunction initCCV() {\n    window.PaymentSDK.ccv.setup(setupCCVConfig);\n    window.PaymentSDK.ccv.setupCardBrand(\n        document.getElementById('cardBrand').value.toUpperCase()\n    );\n    window.PaymentSDK.ccv.onUpdate((result) => {\n        logger.innerHTML = JSON.stringify(result, null, 4);\n    });\n\n    const getTxnLastTokenBtn = currentStep.querySelector('#getTxnLastTokenBtn');\n    getTxnLastTokenBtn.addEventListener('click', (e) => {\n        window.PaymentSDK.ccv.getTxnLastToken((result) => {\n            logger.innerHTML = JSON.stringify(result, null, 4);\n        });\n    });\n}\n\ndocument.addEventListener('DOMContentLoaded', () => {\n    initStep();\n    changeStep(0);\n});\n"],"names":["currentStep","steps","logger","document","getElementById","setupSDK","appId","appKey","serverType","setupConfig","fields","number","element","placeholder","expirationDate","ccv","styles","normal","width","height","color","borderColor","focus","error","success","setupCCVConfig","changeStep","id","length","undefined","forEach","step","index","classList","add","appIdField","querySelector","value","appKeyField","setupField","JSON","stringify","setupCCVField","addEventListener","e","window","PaymentSDK","parse","initSetupSDK","card","getTxnToken","result","innerHTML","setup","onUpdate","setupCardBrand","toUpperCase","getTxnLastToken","remove","call","querySelectorAll","push"],"sourceRoot":""}