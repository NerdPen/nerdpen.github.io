{"version":3,"file":"2.0.0-alpha.4/index.js","mappings":"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","sources":["webpack://91app-payment-sdk/./src/config/index.ts","webpack://91app-payment-sdk/./src/events/eventEmitter.ts","webpack://91app-payment-sdk/./src/events/postMessageEmitter.ts","webpack://91app-payment-sdk/./src/payments/ccv/index.ts","webpack://91app-payment-sdk/./src/payments/creditCard/enums/index.ts","webpack://91app-payment-sdk/./src/payments/creditCard/index.ts","webpack://91app-payment-sdk/./src/payments/creditCard/utilities/index.ts","webpack://91app-payment-sdk/./src/payments/creditCard/utilities/validate.utility.ts","webpack://91app-payment-sdk/./src/payments/fields/enums/index.ts","webpack://91app-payment-sdk/./src/payments/fields/fieldFrame.ts","webpack://91app-payment-sdk/webpack/bootstrap","webpack://91app-payment-sdk/./src/index.ts"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Config = void 0;\nconst eventEmitter_1 = require(\"@/src/events/eventEmitter\");\nclass Config extends eventEmitter_1.EventEmitter {\n    constructor() {\n        super();\n        this._clientData = null;\n        this._origin = {\n            sandbox: 'https://gadget.payment.qa.91dev.tw',\n            production: 'https://gadget.payment.91app.com',\n        };\n    }\n    static getInstance() {\n        if (!Config._instance)\n            Config._instance = new Config();\n        return Config._instance;\n    }\n    set clientData(data) {\n        this._clientData = Object.assign({}, data);\n    }\n    get clientData() {\n        return this._clientData;\n    }\n    get version() {\n        return process.env.VERSION;\n    }\n    get origin() {\n        return process.env.NODE_ENV === 'development'\n            ? '*'\n            : this._origin[this.clientData.serverType];\n    }\n    get apiDomain() {\n        return this._origin[this.clientData.serverType];\n    }\n    get iframeDomain() {\n        return process.env.NODE_ENV === 'development'\n            ? 'http://localhost:8001'\n            : process.env.BUILD === 'demo'\n                ? `./${this.version}`\n                : this._origin[this.clientData.serverType];\n    }\n}\nexports.Config = Config;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EventEmitter = void 0;\nclass EventEmitter {\n    constructor() {\n        this.listeners = new Map();\n    }\n    on(event, callback) {\n        if (!this.listeners.has(event)) {\n            this.listeners.set(event, [callback]);\n        }\n        else {\n            this.listeners.get(event).push(callback);\n        }\n    }\n    emit(event, payload) {\n        if (!this.listeners.has(event))\n            return;\n        const callbacks = this.listeners.get(event);\n        callbacks.forEach((callback) => {\n            callback(payload);\n        });\n    }\n    off(event) {\n        if (this.listeners.has(event)) {\n            this.listeners.delete(event);\n        }\n    }\n}\nexports.EventEmitter = EventEmitter;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PostMessageEmitter = void 0;\nclass PostMessageEmitter {\n    constructor(current, target, origin) {\n        this.current = current;\n        this.target = target;\n        this.origin = origin;\n        this.listeners = new Map();\n        this.current.addEventListener('message', (evt) => {\n            const { type, payload } = evt.data;\n            if (this.listeners.get(type)) {\n                const callbacks = this.listeners.get(type);\n                callbacks.forEach((callback) => {\n                    callback(payload);\n                });\n            }\n        });\n    }\n    on(event, callback) {\n        if (!this.listeners.get(event)) {\n            this.listeners.set(event, [callback]);\n        }\n    }\n    emit(event, payload) {\n        const message = {\n            type: event,\n            payload,\n        };\n        this.target.postMessage(message, this.origin);\n    }\n    registerEvent(event) {\n        const eventBinder = (handler) => {\n            return this.on(event, handler);\n        };\n        return eventBinder;\n    }\n}\nexports.PostMessageEmitter = PostMessageEmitter;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CCV = void 0;\nconst config_1 = require(\"@/src/config\");\nconst eventEmitter_1 = require(\"@/src/events/eventEmitter\");\nconst enums_1 = require(\"@/payments/creditCard/enums\");\nconst utilities_1 = require(\"../creditCard/utilities\");\nconst validate_utility_1 = require(\"@/payments/creditCard/utilities/validate.utility\");\nconst enums_2 = require(\"@/payments/fields/enums\");\nconst fieldFrame_1 = require(\"@/payments/fields/fieldFrame\");\nconst PrivateVariables = new WeakMap();\nclass CCV extends eventEmitter_1.EventEmitter {\n    constructor() {\n        super();\n        PrivateVariables.set(this, {\n            config: null,\n            updateData: {\n                canGetToken: false,\n                cardBrand: enums_1.CardBrand.Unknown,\n                fields: {\n                    ccv: {\n                        target: null,\n                        status: enums_2.FieldStatus.Normal,\n                        value: '',\n                        errorMessage: '',\n                    },\n                },\n            },\n        });\n        this.setup = this.setup.bind(this);\n        this.setupCardBrand = this.setupCardBrand.bind(this);\n    }\n    setup(config) {\n        if (!config_1.Config.getInstance().clientData) {\n            throw new Error('[SDK] please run SDK.setupSDK(appId, appKey, serverType) first.');\n        }\n        if (!(0, validate_utility_1.isSetupCCVFieldsVaild)(config.fields)) {\n            throw new Error(`[SDK] setup field element is incorrect`);\n        }\n        if (config.styles) {\n            Object.entries(config.styles).forEach(([type, styles]) => {\n                if (!(0, validate_utility_1.isSetupStyleTypeVaild)(type)) {\n                    throw new Error(`[SDK] setup style type \"${type}\" is not allowed.`);\n                }\n                Object.keys(styles).forEach((key) => {\n                    if (!(0, validate_utility_1.isSetupCSSStyleVaild)(type, key)) {\n                        throw new Error(`[SDK] setup css style \"${key}\" is not allowed.`);\n                    }\n                });\n            });\n        }\n        PrivateVariables.get(this).config = (0, utilities_1.combineDefaultSetup)(config);\n        this.createFields();\n    }\n    createFields() {\n        const fieldData = PrivateVariables.get(this).config.fields.ccv;\n        const params = {\n            type: 'ccv',\n            placeholder: fieldData.placeholder,\n            styles: PrivateVariables.get(this).config.styles,\n        };\n        const iframe = document.createElement('iframe');\n        this.getParentElement(fieldData.element).appendChild(iframe);\n        iframe.src = `${config_1.Config.getInstance().iframeDomain}/fields/index.html?${encodeURIComponent(JSON.stringify(params))}`;\n        iframe.width = PrivateVariables.get(this).config.styles.normal.width;\n        iframe.height = PrivateVariables.get(this).config.styles.normal.height;\n        iframe.addEventListener('load', () => {\n            PrivateVariables.get(this).updateData.fields.ccv.target.emit('SYNC_CLIENT', config_1.Config.getInstance().clientData);\n            PrivateVariables.get(this).updateData.fields.ccv.target.emit('SYNC_CARD_BRAND', PrivateVariables.get(this).updateData.cardBrand);\n        });\n        const fieldFrame = new fieldFrame_1.FieldFrame(iframe);\n        PrivateVariables.get(this).updateData.fields.ccv.target = fieldFrame;\n        fieldFrame.onUpdate((update) => {\n            PrivateVariables.get(this).updateData = Object.assign(Object.assign({}, PrivateVariables.get(this).updateData), { canGetToken: update.status !== enums_2.FieldStatus.Error, fields: {\n                    ccv: Object.assign(Object.assign({}, PrivateVariables.get(this).updateData.fields.ccv), { status: update.status, value: update.value, errorMessage: update.errorMessage }),\n                } });\n            this.emit('UPDATE', Object.assign(Object.assign({}, PrivateVariables.get(this).updateData), { fields: {\n                    ccv: {\n                        status: update.status,\n                        errorMessage: update.errorMessage,\n                    },\n                } }));\n        });\n    }\n    getParentElement(fieldElement) {\n        return typeof fieldElement === 'string'\n            ? document.querySelector(fieldElement.toString())\n            : fieldElement;\n    }\n    setupCardBrand(cardBrand) {\n        PrivateVariables.get(this).updateData.cardBrand = cardBrand;\n        PrivateVariables.get(this).updateData.fields.ccv.target.emit('SYNC_CARD_BRAND', PrivateVariables.get(this).updateData.cardBrand);\n    }\n    onUpdate(callback) {\n        return this.on('UPDATE', (result) => {\n            callback(result);\n        });\n    }\n}\nexports.CCV = CCV;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CardBrand = void 0;\nvar CardBrand;\n(function (CardBrand) {\n    CardBrand[\"Unknown\"] = \"Unknown\";\n    CardBrand[\"MasterCard\"] = \"MasterCard\";\n    CardBrand[\"VISA\"] = \"VISA\";\n    CardBrand[\"JCB\"] = \"JCB\";\n    CardBrand[\"AMEX\"] = \"AMEX\";\n    CardBrand[\"UnionPay\"] = \"UnionPay\";\n})(CardBrand = exports.CardBrand || (exports.CardBrand = {}));\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CreditCard = void 0;\nconst eventEmitter_1 = require(\"@/src/events/eventEmitter\");\nconst fieldFrame_1 = require(\"@/payments/fields/fieldFrame\");\nconst enums_1 = require(\"@/payments/fields/enums\");\nconst enums_2 = require(\"@/payments/creditCard/enums\");\nconst config_1 = require(\"@/src/config\");\nconst validate_utility_1 = require(\"@/payments/creditCard/utilities/validate.utility\");\nconst utilities_1 = require(\"@/payments/creditCard/utilities\");\nconst PrivateVariables = new WeakMap();\nclass CreditCard extends eventEmitter_1.EventEmitter {\n    constructor() {\n        super();\n        PrivateVariables.set(this, {\n            config: null,\n            updateData: {\n                canGetToken: false,\n                cardBrand: enums_2.CardBrand.Unknown,\n                fields: {\n                    number: null,\n                    expirationDate: null,\n                    ccv: null,\n                },\n            },\n        });\n        Object.keys(PrivateVariables.get(this).updateData.fields).forEach((key) => {\n            PrivateVariables.get(this).updateData.fields[key] = {\n                target: null,\n                status: enums_1.FieldStatus.Normal,\n                value: '',\n                errorMessage: '',\n            };\n        });\n        this.setup = this.setup.bind(this);\n        this.getToken = this.getToken.bind(this);\n    }\n    setup(config) {\n        if (!config_1.Config.getInstance().clientData) {\n            throw new Error('[SDK] please run SDK.setupSDK(appId, appKey, serverType) first.');\n        }\n        if (!(0, validate_utility_1.isFieldsConfigVaild)(config.fields)) {\n            throw new Error(`[SDK] setup field element is incorrect`);\n        }\n        if (config.styles) {\n            Object.entries(config.styles).forEach(([type, styles]) => {\n                if (!(0, validate_utility_1.isSetupStyleTypeVaild)(type)) {\n                    throw new Error(`[SDK] setup style type \"${type}\" is not allowed.`);\n                }\n                Object.keys(styles).forEach((key) => {\n                    if (!(0, validate_utility_1.isSetupCSSStyleVaild)(type, key)) {\n                        throw new Error(`[SDK] setup css style \"${key}\" is not allowed.`);\n                    }\n                });\n            });\n        }\n        PrivateVariables.get(this).config = (0, utilities_1.combineDefaultSetup)(config);\n        this.createFields();\n    }\n    createFields() {\n        Object.keys(PrivateVariables.get(this).config.fields).forEach((key) => {\n            const fieldType = key;\n            const fieldData = PrivateVariables.get(this).config.fields[fieldType];\n            const params = {\n                type: fieldType,\n                placeholder: fieldData.placeholder,\n                styles: PrivateVariables.get(this).config.styles,\n            };\n            const iframe = document.createElement('iframe');\n            this.getParentElement(fieldData.element).appendChild(iframe);\n            iframe.src = `${config_1.Config.getInstance().iframeDomain}/fields/index.html?${encodeURIComponent(JSON.stringify(params))}`;\n            iframe.width =\n                PrivateVariables.get(this).config.styles.normal.width;\n            iframe.height =\n                PrivateVariables.get(this).config.styles.normal.height;\n            iframe.addEventListener('load', () => {\n                PrivateVariables.get(this).updateData.fields.ccv.target.emit('SYNC_CLIENT', config_1.Config.getInstance().clientData);\n            });\n            const fieldFrame = new fieldFrame_1.FieldFrame(iframe);\n            PrivateVariables.get(this).updateData.fields[fieldType].target = fieldFrame;\n            fieldFrame.onUpdateCardBrand((cardBrand) => {\n                PrivateVariables.get(this).updateData.cardBrand = cardBrand;\n                if (fieldType !== 'number') {\n                    fieldFrame.emit('SYNC_CARD_BRAND', cardBrand);\n                }\n            });\n            fieldFrame.onUpdate((update) => {\n                PrivateVariables.get(this).updateData = Object.assign(Object.assign({}, PrivateVariables.get(this).updateData), { fields: Object.assign(Object.assign({}, PrivateVariables.get(this).updateData.fields), { [update.type]: Object.assign(Object.assign({}, PrivateVariables.get(this).updateData.fields[update.type]), { status: update.status, value: update.value, errorMessage: update.errorMessage }) }) });\n                PrivateVariables.get(this).updateData.canGetToken =\n                    Object.values(PrivateVariables.get(this).updateData.fields).find((field) => {\n                        return field.status !== enums_1.FieldStatus.Success;\n                    }) === undefined;\n                const updateData = Object.assign(Object.assign({}, PrivateVariables.get(this).updateData), { fields: {\n                        number: {\n                            status: PrivateVariables.get(this).updateData.fields.number.status,\n                            errorMessage: PrivateVariables.get(this).updateData.fields.number.errorMessage,\n                        },\n                        expirationDate: {\n                            status: PrivateVariables.get(this).updateData.fields.expirationDate\n                                .status,\n                            errorMessage: PrivateVariables.get(this).updateData.fields.expirationDate\n                                .errorMessage,\n                        },\n                        ccv: {\n                            status: PrivateVariables.get(this).updateData.fields.ccv.status,\n                            errorMessage: PrivateVariables.get(this).updateData.fields.ccv.errorMessage,\n                        },\n                    } });\n                if (fieldType === 'number') {\n                    this.emit('UPDATE', updateData);\n                }\n                this.focusToNextField(update.type);\n            });\n        });\n    }\n    getParentElement(fieldElement) {\n        return typeof fieldElement === 'string'\n            ? document.querySelector(fieldElement.toString())\n            : fieldElement;\n    }\n    focusToNextField(currentFieldType) {\n        const isFieldCompleted = PrivateVariables.get(this).updateData.fields[currentFieldType].status ===\n            enums_1.FieldStatus.Success;\n        if (isFieldCompleted) {\n            const currentIndex = Object.keys(PrivateVariables.get(this).updateData.fields).findIndex((key) => key === currentFieldType);\n            Object.values(PrivateVariables.get(this).updateData.fields).forEach((field, index) => {\n                if (index === currentIndex + 1) {\n                    field.target.emit('FOCUS_FIELD');\n                }\n            });\n        }\n    }\n    getFieldData(key) {\n        return PrivateVariables.get(this).updateData.fields[key];\n    }\n    getToken(callback) {\n        const requestData = {\n            appId: config_1.Config.getInstance().clientData.appId.toString(),\n            appKey: config_1.Config.getInstance().clientData.appKey,\n            sdkVer: config_1.Config.getInstance().version,\n            cardNumber: this.getFieldData('number').value,\n            cardExpiryDate: this.getFieldData('expirationDate').value,\n            cardSecurityCode: this.getFieldData('ccv').value,\n        };\n        this.getFieldData('number').target.onGetTokenCompleted((result) => {\n            callback(result);\n        });\n        this.getFieldData('number').target.emit('GET_TOKEN', requestData);\n    }\n    onUpdate(callback) {\n        return this.on('UPDATE', (result) => {\n            callback(result);\n        });\n    }\n}\nexports.CreditCard = CreditCard;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.convertSetupStylesToCSSRule = exports.combineDefaultSetup = exports.getCardCCVMaxLength = exports.getCardNumberMaxLength = exports.getCardBrand = void 0;\nconst enums_1 = require(\"@/payments/creditCard/enums\");\nconst getCardBrand = (value) => {\n    const patterns = {\n        [enums_1.CardBrand.AMEX]: /^3[47]/,\n        [enums_1.CardBrand.VISA]: /^4/,\n        [enums_1.CardBrand.MasterCard]: /^5[1-5]/,\n        [enums_1.CardBrand.JCB]: /^35/,\n        [enums_1.CardBrand.UnionPay]: /^62/,\n    };\n    let cardBrand = enums_1.CardBrand.Unknown;\n    Object.entries(patterns).forEach(([key, pattern]) => {\n        if (pattern.test(value))\n            cardBrand = key;\n    });\n    return cardBrand;\n};\nexports.getCardBrand = getCardBrand;\nconst getCardNumberMaxLength = (cardBrand) => {\n    const maxLength = {\n        [enums_1.CardBrand.Unknown]: 16,\n        [enums_1.CardBrand.AMEX]: 15,\n        [enums_1.CardBrand.VISA]: 16,\n        [enums_1.CardBrand.MasterCard]: 16,\n        [enums_1.CardBrand.JCB]: 16,\n        [enums_1.CardBrand.UnionPay]: 16,\n    };\n    return maxLength[cardBrand];\n};\nexports.getCardNumberMaxLength = getCardNumberMaxLength;\nconst getCardCCVMaxLength = (cardBrand) => {\n    return cardBrand === enums_1.CardBrand.AMEX ? 4 : 3;\n};\nexports.getCardCCVMaxLength = getCardCCVMaxLength;\nconst combineDefaultSetup = (config) => {\n    const defaultConfig = {\n        fields: {\n            number: {\n                element: null,\n                placeholder: '信用卡號',\n            },\n            expirationDate: {\n                element: null,\n                placeholder: '有效期限 MM/YY',\n            },\n            ccv: {\n                element: null,\n                placeholder: '背面末三碼',\n            },\n        },\n        styles: {\n            normal: {\n                width: '100%',\n                height: '40px',\n                color: '#000000',\n                borderColor: '#DDDDDD',\n            },\n            focus: {\n                color: '#000000',\n                borderColor: '#DDDDDD',\n            },\n            error: {\n                color: '#FF5353',\n                borderColor: '#FF5353',\n            },\n            success: {\n                color: '#000000',\n                borderColor: '#DDDDDD',\n            },\n        },\n    };\n    const cloneConfig = Object.assign(Object.assign({}, config), { styles: config.styles ? Object.assign({}, config.styles) : {} });\n    Object.keys(cloneConfig.fields)\n        .filter((key) => !cloneConfig.fields[key].placeholder)\n        .forEach((key) => {\n        cloneConfig.fields[key].placeholder =\n            defaultConfig.fields[key].placeholder;\n    });\n    Object.keys(defaultConfig.styles).forEach((key) => {\n        const styleType = key;\n        if (!Object.keys(cloneConfig.styles).includes(styleType)) {\n            cloneConfig.styles[styleType] = defaultConfig.styles[styleType];\n        }\n        else {\n            cloneConfig.styles[styleType] = Object.assign({}, defaultConfig.styles[styleType], cloneConfig.styles[styleType]);\n        }\n    });\n    return cloneConfig;\n};\nexports.combineDefaultSetup = combineDefaultSetup;\nconst convertSetupStylesToCSSRule = (fieldsStyles) => {\n    const cssRules = [];\n    Object.entries(fieldsStyles || {}).forEach(([key, styles]) => {\n        const styleType = key;\n        let selector = 'input';\n        if (styleType === 'normal') {\n            selector = `input`;\n        }\n        else if (styleType === 'focus') {\n            selector = `input:focus`;\n        }\n        else if (styleType === 'error') {\n            selector = `input.invalid`;\n        }\n        else if (styleType === 'success') {\n            selector = `input.valid`;\n        }\n        else {\n            selector = '';\n        }\n        if (selector === null || selector === void 0 ? void 0 : selector.length) {\n            const formatStyle = Object.entries(styles).map(([name, value]) => {\n                const styleKey = name\n                    .replace(/([A-Z]+)*([A-Z][a-z])/g, '$1-$2')\n                    .toLowerCase();\n                return `${styleKey}:${value}`;\n            });\n            cssRules.push(`${selector}{${formatStyle.join(';')}}`);\n            if (key === 'error' || key === 'success') {\n                cssRules.push(`${selector}:focus{${formatStyle.join(';')}}`);\n            }\n        }\n    });\n    return cssRules;\n};\nexports.convertSetupStylesToCSSRule = convertSetupStylesToCSSRule;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isSetupCSSStyleVaild = exports.isSetupStyleTypeVaild = exports.isSetupCCVFieldsVaild = exports.isFieldsConfigVaild = void 0;\nconst isFieldsConfigVaild = (fields) => {\n    return (fields &&\n        Object.values(fields).find((field) => !field.element ||\n            (typeof field.element !== 'string' &&\n                !(field.element instanceof HTMLElement))) === undefined);\n};\nexports.isFieldsConfigVaild = isFieldsConfigVaild;\nconst isSetupCCVFieldsVaild = (fields) => {\n    return (fields &&\n        Object.keys(fields).length === 1 &&\n        Object.keys(fields).find((key) => key !== 'ccv') === undefined &&\n        Object.values(fields).find((field) => !field.element ||\n            (typeof field.element !== 'string' &&\n                !(field.element instanceof HTMLElement))) === undefined);\n};\nexports.isSetupCCVFieldsVaild = isSetupCCVFieldsVaild;\nconst isSetupStyleTypeVaild = (type) => {\n    const allowTypes = [\n        'normal',\n        'focus',\n        'error',\n        'success',\n    ];\n    return allowTypes.includes(type);\n};\nexports.isSetupStyleTypeVaild = isSetupStyleTypeVaild;\nconst isSetupCSSStyleVaild = (type, cssStyle) => {\n    const allowStyles = type === 'normal'\n        ? ['width', 'height', 'borderColor', 'color']\n        : ['borderColor', 'color'];\n    return allowStyles.includes(cssStyle);\n};\nexports.isSetupCSSStyleVaild = isSetupCSSStyleVaild;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FieldStatus = void 0;\nvar FieldStatus;\n(function (FieldStatus) {\n    FieldStatus[FieldStatus[\"Normal\"] = 0] = \"Normal\";\n    FieldStatus[FieldStatus[\"Success\"] = 1] = \"Success\";\n    FieldStatus[FieldStatus[\"Error\"] = -1] = \"Error\";\n})(FieldStatus = exports.FieldStatus || (exports.FieldStatus = {}));\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FieldFrame = void 0;\nconst postMessageEmitter_1 = require(\"@/src/events/postMessageEmitter\");\nclass FieldFrame extends postMessageEmitter_1.PostMessageEmitter {\n    constructor(element) {\n        super(window, element.contentWindow, '*');\n        this.element = element;\n        this.onUpdate = this.onUpdate.bind(this);\n        this.onUpdateCardBrand = this.onUpdateCardBrand.bind(this);\n        this.onGetTokenCompleted = this.onGetTokenCompleted.bind(this);\n        this.element.setAttribute('scrolling', 'no');\n        this.element.setAttribute('frameborder', '0');\n        this.element.setAttribute('allowtransparency', 'true');\n        this.element.setAttribute('width', '100%');\n    }\n    onUpdate(callback) {\n        return this.on('UPDATE_FIELD', (update) => {\n            callback(update);\n        });\n    }\n    onUpdateCardBrand(callback) {\n        return this.on('UPDATE_CARD_BRAND', (cardBrand) => {\n            callback(cardBrand);\n        });\n    }\n    onGetTokenCompleted(callback) {\n        return this.on('GET_TOKEN_COMPLETED', (response) => {\n            callback(response);\n        });\n    }\n}\nexports.FieldFrame = FieldFrame;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst config_1 = require(\"@/src/config\");\nconst creditCard_1 = require(\"@/payments/creditCard\");\nconst ccv_1 = require(\"@/src/payments/ccv\");\nconst PrivateVariables = new WeakMap();\nclass PaymentSDK {\n    constructor() {\n        this.setupSDK = (appId, appKey, serverType) => {\n            PrivateVariables.get(this).config.clientData = {\n                appId,\n                appKey,\n                serverType,\n            };\n        };\n        PrivateVariables.set(this, {\n            config: config_1.Config.getInstance(),\n            card: null,\n            ccv: null,\n        });\n        this.setupSDK = this.setupSDK.bind(this);\n    }\n    get card() {\n        if (!PrivateVariables.get(this).card) {\n            PrivateVariables.get(this).card = new creditCard_1.CreditCard();\n        }\n        return PrivateVariables.get(this).card;\n    }\n    get ccv() {\n        if (!PrivateVariables.get(this).ccv) {\n            PrivateVariables.get(this).ccv = new ccv_1.CCV();\n        }\n        return PrivateVariables.get(this).ccv;\n    }\n}\nwindow.PaymentSDK = new PaymentSDK();\n"],"names":["Object","defineProperty","exports","value","Config","eventEmitter_1","EventEmitter","constructor","super","this","_clientData","_origin","sandbox","production","static","_instance","clientData","data","assign","version","origin","serverType","apiDomain","iframeDomain","listeners","Map","on","event","callback","has","get","push","set","emit","payload","forEach","off","delete","PostMessageEmitter","current","target","addEventListener","evt","type","message","postMessage","registerEvent","handler","CCV","config_1","enums_1","utilities_1","validate_utility_1","enums_2","fieldFrame_1","PrivateVariables","WeakMap","config","updateData","canGetToken","cardBrand","CardBrand","Unknown","fields","ccv","status","FieldStatus","Normal","errorMessage","setup","bind","setupCardBrand","getInstance","Error","isSetupCCVFieldsVaild","styles","entries","isSetupStyleTypeVaild","keys","key","isSetupCSSStyleVaild","combineDefaultSetup","createFields","fieldData","params","placeholder","iframe","document","createElement","getParentElement","element","appendChild","src","encodeURIComponent","JSON","stringify","width","normal","height","fieldFrame","FieldFrame","onUpdate","update","fieldElement","querySelector","toString","result","CreditCard","number","expirationDate","getToken","isFieldsConfigVaild","fieldType","onUpdateCardBrand","undefined","values","find","field","Success","focusToNextField","currentFieldType","currentIndex","findIndex","index","getFieldData","requestData","appId","appKey","sdkVer","cardNumber","cardExpiryDate","cardSecurityCode","onGetTokenCompleted","convertSetupStylesToCSSRule","getCardCCVMaxLength","getCardNumberMaxLength","getCardBrand","patterns","AMEX","VISA","MasterCard","JCB","UnionPay","pattern","test","defaultConfig","color","borderColor","focus","error","success","cloneConfig","filter","styleType","includes","fieldsStyles","cssRules","selector","length","formatStyle","map","name","replace","toLowerCase","join","HTMLElement","cssStyle","postMessageEmitter_1","window","contentWindow","setAttribute","response","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","module","__webpack_modules__","creditCard_1","ccv_1","PaymentSDK","setupSDK","card"],"sourceRoot":""}