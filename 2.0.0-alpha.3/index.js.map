{"version":3,"file":"2.0.0-alpha.3/index.js","mappings":"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","sources":["webpack://91app-payment-sdk/./src/config/index.ts","webpack://91app-payment-sdk/./src/events/eventEmitter.ts","webpack://91app-payment-sdk/./src/events/postMessageEmitter.ts","webpack://91app-payment-sdk/./src/payments/ccv/index.ts","webpack://91app-payment-sdk/./src/payments/creditCard/enums/index.ts","webpack://91app-payment-sdk/./src/payments/creditCard/index.ts","webpack://91app-payment-sdk/./src/payments/creditCard/utilities/index.ts","webpack://91app-payment-sdk/./src/payments/creditCard/utilities/validate.utility.ts","webpack://91app-payment-sdk/./src/payments/fields/enums/index.ts","webpack://91app-payment-sdk/./src/payments/fields/fieldFrame.ts","webpack://91app-payment-sdk/webpack/bootstrap","webpack://91app-payment-sdk/./src/index.ts"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Config = void 0;\nconst eventEmitter_1 = require(\"@/src/events/eventEmitter\");\nclass Config extends eventEmitter_1.EventEmitter {\n    constructor() {\n        super();\n        this._clientData = null;\n        this._origin = {\n            sandbox: 'https://gadget.payment.qa.91dev.tw',\n            production: 'https://gadget.payment.91app.com',\n        };\n    }\n    static getInstance() {\n        if (!Config._instance)\n            Config._instance = new Config();\n        return Config._instance;\n    }\n    set clientData(data) {\n        this._clientData = Object.assign({}, data);\n    }\n    get clientData() {\n        return this._clientData;\n    }\n    get version() {\n        return process.env.VERSION;\n    }\n    get origin() {\n        return process.env.NODE_ENV === 'development'\n            ? '*'\n            : this._origin[this.clientData.serverType];\n    }\n    get apiDomain() {\n        return this._origin[this.clientData.serverType];\n    }\n    get iframeDomain() {\n        return process.env.NODE_ENV === 'development'\n            ? 'http://localhost:8001'\n            : process.env.BUILD === 'demo'\n                ? `./${this.version}`\n                : this._origin[this.clientData.serverType];\n    }\n}\nexports.Config = Config;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EventEmitter = void 0;\nclass EventEmitter {\n    constructor() {\n        this.listeners = new Map();\n    }\n    on(event, callback) {\n        if (!this.listeners.has(event)) {\n            this.listeners.set(event, [callback]);\n        }\n        else {\n            this.listeners.get(event).push(callback);\n        }\n    }\n    emit(event, payload) {\n        if (!this.listeners.has(event))\n            return;\n        const callbacks = this.listeners.get(event);\n        callbacks.forEach((callback) => {\n            callback(payload);\n        });\n    }\n    off(event) {\n        if (this.listeners.has(event)) {\n            this.listeners.delete(event);\n        }\n    }\n}\nexports.EventEmitter = EventEmitter;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PostMessageEmitter = void 0;\nclass PostMessageEmitter {\n    constructor(current, target, origin) {\n        this.current = current;\n        this.target = target;\n        this.origin = origin;\n        this.listeners = new Map();\n        this.current.addEventListener('message', (evt) => {\n            const { type, payload } = evt.data;\n            if (this.listeners.get(type)) {\n                const callbacks = this.listeners.get(type);\n                callbacks.forEach((callback) => {\n                    callback(payload);\n                });\n            }\n        });\n    }\n    on(event, callback) {\n        if (!this.listeners.get(event)) {\n            this.listeners.set(event, [callback]);\n        }\n    }\n    emit(event, payload) {\n        const message = {\n            type: event,\n            payload,\n        };\n        this.target.postMessage(message, this.origin);\n    }\n    registerEvent(event) {\n        const eventBinder = (handler) => {\n            return this.on(event, handler);\n        };\n        return eventBinder;\n    }\n}\nexports.PostMessageEmitter = PostMessageEmitter;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CCV = void 0;\nconst config_1 = require(\"@/src/config\");\nconst eventEmitter_1 = require(\"@/src/events/eventEmitter\");\nconst enums_1 = require(\"@/payments/creditCard/enums\");\nconst utilities_1 = require(\"../creditCard/utilities\");\nconst validate_utility_1 = require(\"@/payments/creditCard/utilities/validate.utility\");\nconst enums_2 = require(\"@/payments/fields/enums\");\nconst fieldFrame_1 = require(\"@/payments/fields/fieldFrame\");\nconst PrivateVariables = new WeakMap();\nclass CCV extends eventEmitter_1.EventEmitter {\n    constructor() {\n        super();\n        PrivateVariables.set(this, {\n            config: null,\n            updateData: {\n                canGetToken: false,\n                cardBrand: enums_1.CardBrand.Unknown,\n                fields: {\n                    ccv: {\n                        target: null,\n                        status: enums_2.FieldStatus.Normal,\n                        value: '',\n                        errorMessage: '',\n                    },\n                },\n            },\n        });\n        this.setup = this.setup.bind(this);\n        this.setupCardBrand = this.setupCardBrand.bind(this);\n        this.getTxnLastToken = this.getTxnLastToken.bind(this);\n    }\n    setup(config) {\n        if (!config_1.Config.getInstance().clientData) {\n            throw new Error('[SDK] please run SDK.setupSDK(appId, appKey, serverType) first.');\n        }\n        if (!(0, validate_utility_1.isSetupCCVFieldsVaild)(config.fields)) {\n            throw new Error(`[SDK] setup field element is incorrect`);\n        }\n        if (config.styles) {\n            Object.entries(config.styles).forEach(([type, styles]) => {\n                if (!(0, validate_utility_1.isSetupStyleTypeVaild)(type)) {\n                    throw new Error(`[SDK] setup style type \"${type}\" is not allowed.`);\n                }\n                Object.keys(styles).forEach((key) => {\n                    if (!(0, validate_utility_1.isSetupCSSStyleVaild)(type, key)) {\n                        throw new Error(`[SDK] setup css style \"${key}\" is not allowed.`);\n                    }\n                });\n            });\n        }\n        PrivateVariables.get(this).config = (0, utilities_1.combineDefaultSetup)(config);\n        this.createFields();\n    }\n    createFields() {\n        const fieldData = PrivateVariables.get(this).config.fields.ccv;\n        const params = {\n            type: 'ccv',\n            placeholder: fieldData.placeholder,\n            styles: PrivateVariables.get(this).config.styles,\n        };\n        const iframe = document.createElement('iframe');\n        this.getParentElement(fieldData.element).appendChild(iframe);\n        iframe.src = `${config_1.Config.getInstance().iframeDomain}/fields/index.html?${encodeURIComponent(JSON.stringify(params))}`;\n        iframe.width = PrivateVariables.get(this).config.styles.normal.width;\n        iframe.height = PrivateVariables.get(this).config.styles.normal.height;\n        iframe.addEventListener('load', () => {\n            PrivateVariables.get(this).updateData.fields.ccv.target.emit('SYNC_CLIENT', config_1.Config.getInstance().clientData);\n            PrivateVariables.get(this).updateData.fields.ccv.target.emit('SYNC_CARD_BRAND', PrivateVariables.get(this).updateData.cardBrand);\n        });\n        const fieldFrame = new fieldFrame_1.FieldFrame(iframe);\n        PrivateVariables.get(this).updateData.fields.ccv.target = fieldFrame;\n        fieldFrame.onUpdate((update) => {\n            PrivateVariables.get(this).updateData = Object.assign(Object.assign({}, PrivateVariables.get(this).updateData), { canGetToken: update.status !== enums_2.FieldStatus.Error, fields: {\n                    ccv: Object.assign(Object.assign({}, PrivateVariables.get(this).updateData.fields.ccv), { status: update.status, value: update.value, errorMessage: update.errorMessage }),\n                } });\n            this.emit('UPDATE', Object.assign(Object.assign({}, PrivateVariables.get(this).updateData), { fields: {\n                    ccv: {\n                        status: update.status,\n                        errorMessage: update.errorMessage,\n                    },\n                } }));\n        });\n    }\n    getParentElement(fieldElement) {\n        return typeof fieldElement === 'string'\n            ? document.querySelector(fieldElement.toString())\n            : fieldElement;\n    }\n    setupCardBrand(cardBrand) {\n        PrivateVariables.get(this).updateData.cardBrand = cardBrand;\n        PrivateVariables.get(this).updateData.fields.ccv.target.emit('SYNC_CARD_BRAND', PrivateVariables.get(this).updateData.cardBrand);\n    }\n    onUpdate(callback) {\n        return this.on('UPDATE', (result) => {\n            callback(result);\n        });\n    }\n    getTxnLastToken(callback) {\n        const currentField = PrivateVariables.get(this).updateData.fields.ccv.target;\n        const requestData = {\n            appId: config_1.Config.getInstance().clientData.appId.toString(),\n            appKey: config_1.Config.getInstance().clientData.appKey,\n            sdkVer: config_1.Config.getInstance().version,\n            cardBrand: PrivateVariables.get(this).updateData.cardBrand,\n            cardSecurityCode: PrivateVariables.get(this).updateData.fields.ccv.value,\n        };\n        currentField.onGetTxnLastTokenCompleted((result) => {\n            if (callback)\n                callback(result);\n        });\n        currentField.emit('GET_TXN_LAST_TOKEN', requestData);\n    }\n}\nexports.CCV = CCV;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CardBrand = void 0;\nvar CardBrand;\n(function (CardBrand) {\n    CardBrand[\"Unknown\"] = \"Unknown\";\n    CardBrand[\"MasterCard\"] = \"MasterCard\";\n    CardBrand[\"VISA\"] = \"VISA\";\n    CardBrand[\"JCB\"] = \"JCB\";\n    CardBrand[\"AMEX\"] = \"AMEX\";\n    CardBrand[\"UnionPay\"] = \"UnionPay\";\n})(CardBrand = exports.CardBrand || (exports.CardBrand = {}));\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CreditCard = void 0;\nconst eventEmitter_1 = require(\"@/src/events/eventEmitter\");\nconst fieldFrame_1 = require(\"@/payments/fields/fieldFrame\");\nconst enums_1 = require(\"@/payments/fields/enums\");\nconst enums_2 = require(\"@/payments/creditCard/enums\");\nconst config_1 = require(\"@/src/config\");\nconst validate_utility_1 = require(\"@/payments/creditCard/utilities/validate.utility\");\nconst utilities_1 = require(\"@/payments/creditCard/utilities\");\nconst PrivateVariables = new WeakMap();\nclass CreditCard extends eventEmitter_1.EventEmitter {\n    constructor() {\n        super();\n        PrivateVariables.set(this, {\n            config: null,\n            updateData: {\n                canGetToken: false,\n                cardBrand: enums_2.CardBrand.Unknown,\n                fields: {\n                    number: null,\n                    expirationDate: null,\n                    ccv: null,\n                },\n            },\n        });\n        Object.keys(PrivateVariables.get(this).updateData.fields).forEach((key) => {\n            PrivateVariables.get(this).updateData.fields[key] = {\n                target: null,\n                status: enums_1.FieldStatus.Normal,\n                value: '',\n                errorMessage: '',\n            };\n        });\n        this.setup = this.setup.bind(this);\n        this.getTxnToken = this.getTxnToken.bind(this);\n    }\n    setup(config) {\n        if (!config_1.Config.getInstance().clientData) {\n            throw new Error('[SDK] please run SDK.setupSDK(appId, appKey, serverType) first.');\n        }\n        if (!(0, validate_utility_1.isFieldsConfigVaild)(config.fields)) {\n            throw new Error(`[SDK] setup field element is incorrect`);\n        }\n        if (config.styles) {\n            Object.entries(config.styles).forEach(([type, styles]) => {\n                if (!(0, validate_utility_1.isSetupStyleTypeVaild)(type)) {\n                    throw new Error(`[SDK] setup style type \"${type}\" is not allowed.`);\n                }\n                Object.keys(styles).forEach((key) => {\n                    if (!(0, validate_utility_1.isSetupCSSStyleVaild)(type, key)) {\n                        throw new Error(`[SDK] setup css style \"${key}\" is not allowed.`);\n                    }\n                });\n            });\n        }\n        PrivateVariables.get(this).config = (0, utilities_1.combineDefaultSetup)(config);\n        this.createFields();\n    }\n    createFields() {\n        Object.keys(PrivateVariables.get(this).config.fields).forEach((key) => {\n            const fieldType = key;\n            const fieldData = PrivateVariables.get(this).config.fields[fieldType];\n            const params = {\n                type: fieldType,\n                placeholder: fieldData.placeholder,\n                styles: PrivateVariables.get(this).config.styles,\n            };\n            const iframe = document.createElement('iframe');\n            this.getParentElement(fieldData.element).appendChild(iframe);\n            iframe.src = `${config_1.Config.getInstance().iframeDomain}/fields/index.html?${encodeURIComponent(JSON.stringify(params))}`;\n            iframe.width =\n                PrivateVariables.get(this).config.styles.normal.width;\n            iframe.height =\n                PrivateVariables.get(this).config.styles.normal.height;\n            iframe.addEventListener('load', () => {\n                PrivateVariables.get(this).updateData.fields[fieldType].target.emit('SYNC_CLIENT', config_1.Config.getInstance().clientData);\n            });\n            const fieldFrame = new fieldFrame_1.FieldFrame(iframe);\n            PrivateVariables.get(this).updateData.fields[fieldType].target = fieldFrame;\n            fieldFrame.onUpdateCardBrand((cardBrand) => {\n                PrivateVariables.get(this).updateData.cardBrand = cardBrand;\n                if (fieldType !== 'number') {\n                    fieldFrame.emit('SYNC_CARD_BRAND', cardBrand);\n                }\n            });\n            fieldFrame.onUpdate((update) => {\n                PrivateVariables.get(this).updateData = Object.assign(Object.assign({}, PrivateVariables.get(this).updateData), { fields: Object.assign(Object.assign({}, PrivateVariables.get(this).updateData.fields), { [update.type]: Object.assign(Object.assign({}, PrivateVariables.get(this).updateData.fields[update.type]), { status: update.status, value: update.value, errorMessage: update.errorMessage }) }) });\n                PrivateVariables.get(this).updateData.canGetToken =\n                    Object.values(PrivateVariables.get(this).updateData.fields).find((field) => {\n                        return field.status !== enums_1.FieldStatus.Success;\n                    }) === undefined;\n                const updateData = Object.assign(Object.assign({}, PrivateVariables.get(this).updateData), { fields: {\n                        number: {\n                            status: PrivateVariables.get(this).updateData.fields.number.status,\n                            errorMessage: PrivateVariables.get(this).updateData.fields.number.errorMessage,\n                        },\n                        expirationDate: {\n                            status: PrivateVariables.get(this).updateData.fields.expirationDate\n                                .status,\n                            errorMessage: PrivateVariables.get(this).updateData.fields.expirationDate\n                                .errorMessage,\n                        },\n                        ccv: {\n                            status: PrivateVariables.get(this).updateData.fields.ccv.status,\n                            errorMessage: PrivateVariables.get(this).updateData.fields.ccv.errorMessage,\n                        },\n                    } });\n                if (fieldType === 'number') {\n                    this.emit('UPDATE', updateData);\n                }\n                this.focusToNextField(update.type);\n            });\n        });\n    }\n    getParentElement(fieldElement) {\n        return typeof fieldElement === 'string'\n            ? document.querySelector(fieldElement.toString())\n            : fieldElement;\n    }\n    focusToNextField(currentFieldType) {\n        const isFieldCompleted = PrivateVariables.get(this).updateData.fields[currentFieldType].status ===\n            enums_1.FieldStatus.Success;\n        if (isFieldCompleted) {\n            const currentIndex = Object.keys(PrivateVariables.get(this).updateData.fields).findIndex((key) => key === currentFieldType);\n            Object.values(PrivateVariables.get(this).updateData.fields).forEach((field, index) => {\n                if (index === currentIndex + 1) {\n                    field.target.emit('FOCUS_FIELD');\n                }\n            });\n        }\n    }\n    getFieldData(key) {\n        return PrivateVariables.get(this).updateData.fields[key];\n    }\n    getTxnToken(callback) {\n        const requestData = {\n            appId: config_1.Config.getInstance().clientData.appId.toString(),\n            appKey: config_1.Config.getInstance().clientData.appKey,\n            sdkVer: config_1.Config.getInstance().version,\n            cardNumber: this.getFieldData('number').value,\n            cardExpiryDate: this.getFieldData('expirationDate').value,\n            cardSecurityCode: this.getFieldData('ccv').value,\n        };\n        this.getFieldData('number').target.onGetTxnTokenCompleted((result) => {\n            callback(result);\n        });\n        this.getFieldData('number').target.emit('GET_TXN_TOKEN', requestData);\n    }\n    onUpdate(callback) {\n        return this.on('UPDATE', (result) => {\n            callback(result);\n        });\n    }\n}\nexports.CreditCard = CreditCard;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.convertSetupStylesToCSSRule = exports.combineDefaultSetup = exports.getCardCCVMaxLength = exports.getCardNumberMaxLength = exports.getCardBrand = void 0;\nconst enums_1 = require(\"@/payments/creditCard/enums\");\nconst getCardBrand = (value) => {\n    const patterns = {\n        [enums_1.CardBrand.AMEX]: /^3[47]/,\n        [enums_1.CardBrand.VISA]: /^4/,\n        [enums_1.CardBrand.MasterCard]: /^5[1-5]/,\n        [enums_1.CardBrand.JCB]: /^35/,\n        [enums_1.CardBrand.UnionPay]: /^62/,\n    };\n    let cardBrand = enums_1.CardBrand.Unknown;\n    Object.entries(patterns).forEach(([key, pattern]) => {\n        if (pattern.test(value))\n            cardBrand = key;\n    });\n    return cardBrand;\n};\nexports.getCardBrand = getCardBrand;\nconst getCardNumberMaxLength = (cardBrand) => {\n    const maxLength = {\n        [enums_1.CardBrand.Unknown]: 16,\n        [enums_1.CardBrand.AMEX]: 15,\n        [enums_1.CardBrand.VISA]: 16,\n        [enums_1.CardBrand.MasterCard]: 16,\n        [enums_1.CardBrand.JCB]: 16,\n        [enums_1.CardBrand.UnionPay]: 16,\n    };\n    return maxLength[cardBrand];\n};\nexports.getCardNumberMaxLength = getCardNumberMaxLength;\nconst getCardCCVMaxLength = (cardBrand) => {\n    return cardBrand === enums_1.CardBrand.AMEX ? 4 : 3;\n};\nexports.getCardCCVMaxLength = getCardCCVMaxLength;\nconst combineDefaultSetup = (config) => {\n    const defaultConfig = {\n        fields: {\n            number: {\n                element: null,\n                placeholder: '信用卡號',\n            },\n            expirationDate: {\n                element: null,\n                placeholder: '有效期限 MM/YY',\n            },\n            ccv: {\n                element: null,\n                placeholder: '背面末三碼',\n            },\n        },\n        styles: {\n            normal: {\n                width: '100%',\n                height: '40px',\n                color: '#000000',\n                borderColor: '#DDDDDD',\n            },\n            focus: {\n                color: '#000000',\n                borderColor: '#DDDDDD',\n            },\n            error: {\n                color: '#FF5353',\n                borderColor: '#FF5353',\n            },\n            success: {\n                color: '#000000',\n                borderColor: '#DDDDDD',\n            },\n        },\n    };\n    const cloneConfig = Object.assign(Object.assign({}, config), { styles: config.styles ? Object.assign({}, config.styles) : {} });\n    Object.keys(cloneConfig.fields)\n        .filter((key) => !cloneConfig.fields[key].placeholder)\n        .forEach((key) => {\n        cloneConfig.fields[key].placeholder =\n            defaultConfig.fields[key].placeholder;\n    });\n    Object.keys(defaultConfig.styles).forEach((key) => {\n        const styleType = key;\n        if (!Object.keys(cloneConfig.styles).includes(styleType)) {\n            cloneConfig.styles[styleType] = defaultConfig.styles[styleType];\n        }\n        else {\n            cloneConfig.styles[styleType] = Object.assign({}, defaultConfig.styles[styleType], cloneConfig.styles[styleType]);\n        }\n    });\n    return cloneConfig;\n};\nexports.combineDefaultSetup = combineDefaultSetup;\nconst convertSetupStylesToCSSRule = (fieldsStyles) => {\n    const cssRules = [];\n    Object.entries(fieldsStyles || {}).forEach(([key, styles]) => {\n        const styleType = key;\n        let selector = 'input';\n        if (styleType === 'normal') {\n            selector = `input`;\n        }\n        else if (styleType === 'focus') {\n            selector = `input:focus`;\n        }\n        else if (styleType === 'error') {\n            selector = `input.invalid`;\n        }\n        else if (styleType === 'success') {\n            selector = `input.valid`;\n        }\n        else {\n            selector = '';\n        }\n        if (selector === null || selector === void 0 ? void 0 : selector.length) {\n            const formatStyle = Object.entries(styles).map(([name, value]) => {\n                const styleKey = name\n                    .replace(/([A-Z]+)*([A-Z][a-z])/g, '$1-$2')\n                    .toLowerCase();\n                return `${styleKey}:${value}`;\n            });\n            cssRules.push(`${selector}{${formatStyle.join(';')}}`);\n            if (key === 'error' || key === 'success') {\n                cssRules.push(`${selector}:focus{${formatStyle.join(';')}}`);\n            }\n        }\n    });\n    return cssRules;\n};\nexports.convertSetupStylesToCSSRule = convertSetupStylesToCSSRule;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.isSetupCSSStyleVaild = exports.isSetupStyleTypeVaild = exports.isSetupCCVFieldsVaild = exports.isFieldsConfigVaild = void 0;\nconst isFieldsConfigVaild = (fields) => {\n    return (fields &&\n        Object.values(fields).find((field) => !field.element ||\n            (typeof field.element !== 'string' &&\n                !(field.element instanceof HTMLElement))) === undefined);\n};\nexports.isFieldsConfigVaild = isFieldsConfigVaild;\nconst isSetupCCVFieldsVaild = (fields) => {\n    return (fields &&\n        Object.keys(fields).length === 1 &&\n        Object.keys(fields).find((key) => key !== 'ccv') === undefined &&\n        Object.values(fields).find((field) => !field.element ||\n            (typeof field.element !== 'string' &&\n                !(field.element instanceof HTMLElement))) === undefined);\n};\nexports.isSetupCCVFieldsVaild = isSetupCCVFieldsVaild;\nconst isSetupStyleTypeVaild = (type) => {\n    const allowTypes = [\n        'normal',\n        'focus',\n        'error',\n        'success',\n    ];\n    return allowTypes.includes(type);\n};\nexports.isSetupStyleTypeVaild = isSetupStyleTypeVaild;\nconst isSetupCSSStyleVaild = (type, cssStyle) => {\n    const allowStyles = type === 'normal'\n        ? ['width', 'height', 'borderColor', 'color']\n        : ['borderColor', 'color'];\n    return allowStyles.includes(cssStyle);\n};\nexports.isSetupCSSStyleVaild = isSetupCSSStyleVaild;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FieldStatus = void 0;\nvar FieldStatus;\n(function (FieldStatus) {\n    FieldStatus[FieldStatus[\"Normal\"] = 0] = \"Normal\";\n    FieldStatus[FieldStatus[\"Success\"] = 1] = \"Success\";\n    FieldStatus[FieldStatus[\"Error\"] = -1] = \"Error\";\n})(FieldStatus = exports.FieldStatus || (exports.FieldStatus = {}));\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FieldFrame = void 0;\nconst postMessageEmitter_1 = require(\"@/src/events/postMessageEmitter\");\nclass FieldFrame extends postMessageEmitter_1.PostMessageEmitter {\n    constructor(element) {\n        super(window, element.contentWindow, '*');\n        this.element = element;\n        this.onUpdate = this.onUpdate.bind(this);\n        this.onUpdateCardBrand = this.onUpdateCardBrand.bind(this);\n        this.onGetTxnTokenCompleted = this.onGetTxnTokenCompleted.bind(this);\n        this.onGetTxnLastTokenCompleted =\n            this.onGetTxnLastTokenCompleted.bind(this);\n        this.element.setAttribute('scrolling', 'no');\n        this.element.setAttribute('frameborder', '0');\n        this.element.setAttribute('allowtransparency', 'true');\n        this.element.setAttribute('width', '100%');\n    }\n    onUpdate(callback) {\n        return this.on('UPDATE_FIELD', (update) => {\n            callback(update);\n        });\n    }\n    onUpdateCardBrand(callback) {\n        return this.on('UPDATE_CARD_BRAND', (cardBrand) => {\n            callback(cardBrand);\n        });\n    }\n    onGetTxnTokenCompleted(callback) {\n        return this.on('GET_TXN_TOKEN_COMPLETED', (response) => {\n            callback(response);\n        });\n    }\n    onGetTxnLastTokenCompleted(callback) {\n        return this.on('GET_TXN_LAST_TOKEN_COMPLETED', (response) => {\n            callback(response);\n        });\n    }\n}\nexports.FieldFrame = FieldFrame;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst config_1 = require(\"@/src/config\");\nconst creditCard_1 = require(\"@/payments/creditCard\");\nconst ccv_1 = require(\"@/src/payments/ccv\");\nconst PrivateVariables = new WeakMap();\nclass PaymentSDK {\n    constructor() {\n        this.setupSDK = (appId, appKey, serverType) => {\n            PrivateVariables.get(this).config.clientData = {\n                appId,\n                appKey,\n                serverType,\n            };\n        };\n        PrivateVariables.set(this, {\n            config: config_1.Config.getInstance(),\n            card: null,\n            ccv: null,\n        });\n        this.setupSDK = this.setupSDK.bind(this);\n    }\n    get card() {\n        if (!PrivateVariables.get(this).card) {\n            PrivateVariables.get(this).card = new creditCard_1.CreditCard();\n        }\n        return PrivateVariables.get(this).card;\n    }\n    get ccv() {\n        if (!PrivateVariables.get(this).ccv) {\n            PrivateVariables.get(this).ccv = new ccv_1.CCV();\n        }\n        return PrivateVariables.get(this).ccv;\n    }\n}\nwindow.PaymentSDK = new PaymentSDK();\n"],"names":["Object","defineProperty","exports","value","Config","eventEmitter_1","EventEmitter","constructor","super","this","_clientData","_origin","sandbox","production","static","_instance","clientData","data","assign","version","origin","serverType","apiDomain","iframeDomain","listeners","Map","on","event","callback","has","get","push","set","emit","payload","forEach","off","delete","PostMessageEmitter","current","target","addEventListener","evt","type","message","postMessage","registerEvent","handler","CCV","config_1","enums_1","utilities_1","validate_utility_1","enums_2","fieldFrame_1","PrivateVariables","WeakMap","config","updateData","canGetToken","cardBrand","CardBrand","Unknown","fields","ccv","status","FieldStatus","Normal","errorMessage","setup","bind","setupCardBrand","getTxnLastToken","getInstance","Error","isSetupCCVFieldsVaild","styles","entries","isSetupStyleTypeVaild","keys","key","isSetupCSSStyleVaild","combineDefaultSetup","createFields","fieldData","params","placeholder","iframe","document","createElement","getParentElement","element","appendChild","src","encodeURIComponent","JSON","stringify","width","normal","height","fieldFrame","FieldFrame","onUpdate","update","fieldElement","querySelector","toString","result","currentField","requestData","appId","appKey","sdkVer","cardSecurityCode","onGetTxnLastTokenCompleted","CreditCard","number","expirationDate","getTxnToken","isFieldsConfigVaild","fieldType","onUpdateCardBrand","undefined","values","find","field","Success","focusToNextField","currentFieldType","currentIndex","findIndex","index","getFieldData","cardNumber","cardExpiryDate","onGetTxnTokenCompleted","convertSetupStylesToCSSRule","getCardCCVMaxLength","getCardNumberMaxLength","getCardBrand","patterns","AMEX","VISA","MasterCard","JCB","UnionPay","pattern","test","defaultConfig","color","borderColor","focus","error","success","cloneConfig","filter","styleType","includes","fieldsStyles","cssRules","selector","length","formatStyle","map","name","replace","toLowerCase","join","HTMLElement","cssStyle","postMessageEmitter_1","window","contentWindow","setAttribute","response","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","module","__webpack_modules__","creditCard_1","ccv_1","PaymentSDK","setupSDK","card"],"sourceRoot":""}