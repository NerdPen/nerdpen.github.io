{"version":3,"file":"2.0.0-alpha.3/index.js?t=e9eaa4a92e4961d65ce7","mappings":"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","sources":["webpack://91app-payment-sdk/./src/config/index.ts","webpack://91app-payment-sdk/./src/events/eventEmitter.ts","webpack://91app-payment-sdk/./src/events/postMessageEmitter.ts","webpack://91app-payment-sdk/./src/payments/creditCard/enums/index.ts","webpack://91app-payment-sdk/./src/payments/creditCard/index.ts","webpack://91app-payment-sdk/./src/payments/creditCard/models/index.ts","webpack://91app-payment-sdk/./src/payments/fields/enums/index.ts","webpack://91app-payment-sdk/./src/payments/fields/fieldFrame.ts","webpack://91app-payment-sdk/webpack/bootstrap","webpack://91app-payment-sdk/./src/index.ts"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Config = void 0;\nconst eventEmitter_1 = require(\"@/src/events/eventEmitter\");\nclass Config extends eventEmitter_1.EventEmitter {\n    constructor() {\n        super();\n        this._clientData = null;\n        this._origin = {\n            sandbox: 'https://gadget.payment.qa.91dev.tw',\n            production: 'https://gadget.payment.91app.com',\n        };\n    }\n    static getInstance() {\n        if (!Config._instance)\n            Config._instance = new Config();\n        return Config._instance;\n    }\n    set clientData(data) {\n        this._clientData = Object.assign({}, data);\n    }\n    get clientData() {\n        return this._clientData;\n    }\n    get version() {\n        return process.env.VERSION;\n    }\n    get origin() {\n        return process.env.NODE_ENV === 'development'\n            ? '*'\n            : this._origin[this.clientData.serverType];\n    }\n    get apiDomain() {\n        return this._origin[this.clientData.serverType];\n    }\n    get iframeDomain() {\n        return process.env.NODE_ENV === 'development'\n            ? 'http://localhost:8001'\n            : `./${this.version}`;\n    }\n}\nexports.Config = Config;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EventEmitter = void 0;\nclass EventEmitter {\n    constructor() {\n        this.listeners = new Map();\n    }\n    on(event, callback) {\n        if (!this.listeners.has(event)) {\n            this.listeners.set(event, [callback]);\n        }\n        else {\n            this.listeners.get(event).push(callback);\n        }\n    }\n    emit(event, payload) {\n        if (!this.listeners.has(event))\n            return;\n        const callbacks = this.listeners.get(event);\n        callbacks.forEach((callback) => {\n            callback(payload);\n        });\n    }\n    off(event) {\n        if (this.listeners.has(event)) {\n            this.listeners.delete(event);\n        }\n    }\n}\nexports.EventEmitter = EventEmitter;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PostMessageEmitter = void 0;\nclass PostMessageEmitter {\n    constructor(current, target, origin) {\n        this.current = current;\n        this.target = target;\n        this.origin = origin;\n        this.listeners = new Map();\n        this.current.addEventListener('message', (evt) => {\n            const { type, payload } = evt.data;\n            if (this.listeners.get(type)) {\n                const callbacks = this.listeners.get(type);\n                callbacks.forEach((callback) => {\n                    callback(payload);\n                });\n            }\n        });\n    }\n    on(event, callback) {\n        if (!this.listeners.get(event)) {\n            this.listeners.set(event, [callback]);\n        }\n    }\n    emit(event, payload) {\n        const message = {\n            type: event,\n            payload,\n        };\n        this.target.postMessage(message, this.origin);\n    }\n    registerEvent(event) {\n        const eventBinder = (handler) => {\n            return this.on(event, handler);\n        };\n        return eventBinder;\n    }\n}\nexports.PostMessageEmitter = PostMessageEmitter;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CardBrand = void 0;\nvar CardBrand;\n(function (CardBrand) {\n    CardBrand[\"Unknown\"] = \"Unknown\";\n    CardBrand[\"MasterCard\"] = \"MasterCard\";\n    CardBrand[\"VISA\"] = \"VISA\";\n    CardBrand[\"JCB\"] = \"JCB\";\n    CardBrand[\"AMEX\"] = \"AMEX\";\n    CardBrand[\"UnionPay\"] = \"UnionPay\";\n})(CardBrand = exports.CardBrand || (exports.CardBrand = {}));\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CreditCard = void 0;\nconst eventEmitter_1 = require(\"@/src/events/eventEmitter\");\nconst models_1 = require(\"@/payments/creditCard/models\");\nconst fieldFrame_1 = require(\"@/payments/fields/fieldFrame\");\nconst enums_1 = require(\"@/payments/fields/enums\");\nconst enums_2 = require(\"@/payments/creditCard/enums\");\nconst config_1 = require(\"@/src/config\");\nclass CreditCard extends eventEmitter_1.EventEmitter {\n    constructor() {\n        super();\n        this.setup = this.setup.bind(this);\n        this.getToken = this.getToken.bind(this);\n        this.creditCardData = {\n            canGetToken: false,\n            cardBrand: enums_2.CardBrand.Unknown,\n            fields: {\n                number: {\n                    target: null,\n                    status: enums_1.FieldStatus.Normal,\n                    value: '',\n                    errorMessage: '',\n                },\n                expirationDate: {\n                    target: null,\n                    status: enums_1.FieldStatus.Normal,\n                    value: '',\n                    errorMessage: '',\n                },\n                ccv: {\n                    target: null,\n                    status: enums_1.FieldStatus.Normal,\n                    value: '',\n                    errorMessage: '',\n                },\n            },\n        };\n    }\n    setup(config) {\n        var _a, _b, _c, _d, _e, _f;\n        if (!config_1.Config.getInstance().clientData) {\n            throw new Error('Error: Please run PaymentSDK.setupSDK(appId, appKey, serverType)');\n        }\n        Object.entries(config.styles || {}).forEach(([name, value]) => {\n            if (!models_1.AllowedStyleClassName.includes(name)) {\n                throw new Error(`${name} is not valid calss name`);\n            }\n            ;\n            Object.keys(value).forEach((key) => {\n                if (name === 'input' &&\n                    !models_1.AllowedStyles.includes(key)) {\n                    throw new Error(`${name}.${key} is not valid style`);\n                }\n                else if (name !== 'input' && !['borderColor', 'color'].includes(key)) {\n                    throw new Error(`${name}.${key} is not valid style`);\n                }\n            });\n        });\n        this.setupConfig = Object.assign(Object.assign({}, config), { styles: {\n                input: Object.assign({ height: '40px', width: '100%', color: '#000', borderColor: '#DDDDDD' }, (((_a = config.styles) === null || _a === void 0 ? void 0 : _a['input']) || {})),\n                \"input:focus\": Object.assign({ color: '#000', borderColor: '#DDDDDD' }, (((_b = config.styles) === null || _b === void 0 ? void 0 : _b['input:focus']) || {})),\n                '.valid': Object.assign({ color: '#000', borderColor: '#DDDDDD' }, (((_c = config.styles) === null || _c === void 0 ? void 0 : _c['.valid']) || {})),\n                \".valid:focus\": Object.assign({ color: '#000', borderColor: '#DDDDDD' }, (((_d = config.styles) === null || _d === void 0 ? void 0 : _d['.valid:focus']) || {})),\n                '.invalid': Object.assign({ borderColor: '#FF5353', color: '#FF5353' }, (((_e = config.styles) === null || _e === void 0 ? void 0 : _e['.invalid']) || {})),\n                \".invalid:focus\": Object.assign({ borderColor: '#FF5353', color: '#FF5353' }, (((_f = config.styles) === null || _f === void 0 ? void 0 : _f['.invalid:focus']) || {}))\n            } });\n        this.createFields();\n    }\n    createFields() {\n        Object.keys(this.setupConfig.fields).forEach((key) => {\n            const fieldType = key;\n            const parentElement = typeof this.setupConfig.fields[fieldType].element === 'string'\n                ? document.getElementById(this.setupConfig.fields[fieldType].element.toString().replace('#', ''))\n                : this.setupConfig.fields[fieldType].element;\n            const iframe = document.createElement('iframe');\n            const params = {\n                type: fieldType,\n                placeholder: this.setupConfig.fields[fieldType].placeholder,\n                styles: this.setupConfig.styles,\n            };\n            iframe.src = `${config_1.Config.getInstance().iframeDomain}/fields/index.html?${encodeURIComponent(JSON.stringify(params))}`;\n            iframe.height = this.setupConfig.styles['input'].height;\n            iframe.width = this.setupConfig.styles['input'].width;\n            parentElement.appendChild(iframe);\n            const fieldFrame = new fieldFrame_1.FieldFrame(iframe);\n            this.creditCardData.fields[fieldType].target = fieldFrame;\n            fieldFrame.onUpdateCardBrand((cardBrand) => {\n                this.creditCardData.cardBrand = cardBrand;\n                if (fieldType !== 'number')\n                    fieldFrame.emit('SYNC_CARD_BRAND', cardBrand);\n            });\n            fieldFrame.onUpdate((update) => {\n                this.creditCardData = Object.assign(Object.assign({}, this.creditCardData), { fields: Object.assign(Object.assign({}, this.creditCardData.fields), { [update.type]: Object.assign(Object.assign({}, this.creditCardData.fields[update.type]), { status: update.status, value: update.value, errorMessage: update.errorMessage }) }) });\n                this.creditCardData.canGetToken =\n                    Object.entries(this.creditCardData.fields).find(([_key, field]) => {\n                        return field.status !== enums_1.FieldStatus.Success;\n                    }) === undefined;\n                const updateData = Object.assign(Object.assign({}, this.creditCardData), { fields: {\n                        number: {\n                            status: this.creditCardData.fields.number.status,\n                            errorMessage: this.creditCardData.fields.number.errorMessage,\n                        },\n                        expirationDate: {\n                            status: this.creditCardData.fields.expirationDate.status,\n                            errorMessage: this.creditCardData.fields.expirationDate.errorMessage,\n                        },\n                        ccv: {\n                            status: this.creditCardData.fields.ccv.status,\n                            errorMessage: this.creditCardData.fields.ccv.errorMessage,\n                        },\n                    } });\n                if (fieldType === 'number') {\n                    this.emit('UPDATE', updateData);\n                }\n                this.focusToNextField(update.type);\n            });\n        });\n    }\n    focusToNextField(currentFieldType) {\n        const isFieldCompleted = this.creditCardData.fields[currentFieldType].status ===\n            enums_1.FieldStatus.Success;\n        if (isFieldCompleted) {\n            const currentIndex = Object.keys(this.creditCardData.fields).findIndex((key) => key === currentFieldType);\n            Object.entries(this.creditCardData.fields).forEach(([_key, field], index) => {\n                if (index === currentIndex + 1) {\n                    field.target.emit('FOCUS_FIELD');\n                }\n            });\n        }\n    }\n    getFieldData(key) {\n        return this.creditCardData.fields[key];\n    }\n    getToken(callback) {\n        const requestData = {\n            appId: config_1.Config.getInstance().clientData.appId.toString(),\n            appKey: config_1.Config.getInstance().clientData.appKey,\n            sdkVer: config_1.Config.getInstance().version,\n            cardNumber: this.getFieldData('number').value,\n            cardExpiryDate: this.getFieldData('expirationDate').value,\n            cardSecurityCode: this.getFieldData('ccv').value,\n        };\n        this.getFieldData('number').target.onGetTokenCompleted((result) => {\n            callback(result);\n        });\n        this.getFieldData('number').target.emit('GET_TOKEN', requestData);\n    }\n    onUpdate(callback) {\n        return this.on('UPDATE', (result) => {\n            callback(result);\n        });\n    }\n}\nexports.CreditCard = CreditCard;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.AllowedStyleClassName = exports.AllowedStyles = void 0;\nexports.AllowedStyles = ['borderColor', 'width', 'height', 'color'];\nexports.AllowedStyleClassName = [\n    'input',\n    'input:focus',\n    '.valid',\n    '.valid:focus',\n    '.invalid',\n    '.invalid:focus',\n];\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FieldStatus = void 0;\nvar FieldStatus;\n(function (FieldStatus) {\n    FieldStatus[FieldStatus[\"Normal\"] = 0] = \"Normal\";\n    FieldStatus[FieldStatus[\"Success\"] = 1] = \"Success\";\n    FieldStatus[FieldStatus[\"Error\"] = -1] = \"Error\";\n})(FieldStatus = exports.FieldStatus || (exports.FieldStatus = {}));\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FieldFrame = void 0;\nconst postMessageEmitter_1 = require(\"@/src/events/postMessageEmitter\");\nconst config_1 = require(\"@/src/config\");\nclass FieldFrame extends postMessageEmitter_1.PostMessageEmitter {\n    constructor(element) {\n        super(window, element.contentWindow, '*');\n        this.element = element;\n        this.onUpdate = this.onUpdate.bind(this);\n        this.onUpdateCardBrand = this.onUpdateCardBrand.bind(this);\n        this.onGetTokenCompleted = this.onGetTokenCompleted.bind(this);\n        this.element.setAttribute('scrolling', 'no');\n        this.element.setAttribute('frameborder', '0');\n        this.element.setAttribute('allowtransparency', 'true');\n        this.element.setAttribute('width', '100%');\n        this.element.addEventListener('load', () => this.syncClientData());\n    }\n    syncClientData() {\n        this.emit('SYNC_CLIENT', config_1.Config.getInstance().clientData);\n    }\n    onUpdate(callback) {\n        return this.on('UPDATE_FIELD', (update) => {\n            callback(update);\n        });\n    }\n    onUpdateCardBrand(callback) {\n        return this.on('UPDATE_CARD_BRAND', (cardBrand) => {\n            callback(cardBrand);\n        });\n    }\n    onGetTokenCompleted(callback) {\n        return this.on('GET_TOKEN_COMPLETED', (response) => {\n            callback(response);\n        });\n    }\n}\nexports.FieldFrame = FieldFrame;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst config_1 = require(\"@/src/config\");\nconst creditCard_1 = require(\"@/payments/creditCard\");\nclass PaymentSDK {\n    constructor() {\n        this.setupSDK = (appId, appKey, serverType) => {\n            this.config.clientData = {\n                appId,\n                appKey,\n                serverType,\n            };\n            this.createPayment();\n        };\n        this.config = config_1.Config.getInstance();\n        this.setupSDK = this.setupSDK.bind(this);\n    }\n    createPayment() {\n        this.creditCard = new creditCard_1.CreditCard();\n    }\n}\nwindow.PaymentSDK = new PaymentSDK();\n"],"names":["Object","defineProperty","exports","value","Config","eventEmitter_1","EventEmitter","constructor","super","this","_clientData","_origin","sandbox","production","static","_instance","clientData","data","assign","version","origin","serverType","apiDomain","iframeDomain","listeners","Map","on","event","callback","has","get","push","set","emit","payload","forEach","off","delete","PostMessageEmitter","current","target","addEventListener","evt","type","message","postMessage","registerEvent","handler","CardBrand","CreditCard","models_1","fieldFrame_1","enums_1","enums_2","config_1","setup","bind","getToken","creditCardData","canGetToken","cardBrand","Unknown","fields","number","status","FieldStatus","Normal","errorMessage","expirationDate","ccv","config","_a","_b","_c","_d","_e","_f","getInstance","Error","entries","styles","name","AllowedStyleClassName","includes","keys","key","AllowedStyles","setupConfig","input","height","width","color","borderColor","createFields","fieldType","parentElement","element","document","getElementById","toString","replace","iframe","createElement","params","placeholder","src","encodeURIComponent","JSON","stringify","appendChild","fieldFrame","FieldFrame","onUpdateCardBrand","onUpdate","update","undefined","find","_key","field","Success","updateData","focusToNextField","currentFieldType","currentIndex","findIndex","index","getFieldData","requestData","appId","appKey","sdkVer","cardNumber","cardExpiryDate","cardSecurityCode","onGetTokenCompleted","result","postMessageEmitter_1","window","contentWindow","setAttribute","syncClientData","response","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","module","__webpack_modules__","creditCard_1","PaymentSDK","setupSDK","createPayment","creditCard"],"sourceRoot":""}