{"version":3,"file":"fields/index.js?t=7e2619218c2d018ec7e7","mappings":"wCACAA,OAAOC,eAAeC,EAAS,aAAc,CAAEC,OAAO,IACtDD,EAAQE,YAAS,EACjB,MAAMC,EAAiB,EAAQ,KAC/B,MAAMD,UAAeC,EAAeC,aAChCC,cACIC,QACAC,KAAKC,YAAc,KACnBD,KAAKE,QAAU,CACXC,QAAS,qCACTC,WAAY,mCAEpB,CACAC,qBAGI,OAFKV,EAAOW,YACRX,EAAOW,UAAY,IAAIX,GACpBA,EAAOW,SAClB,CACIC,eAAWC,GACXR,KAAKC,YAAcV,OAAOkB,OAAO,CAAC,EAAGD,EACzC,CACID,iBACA,OAAOP,KAAKC,WAChB,CACIS,cACA,MAAO,eACX,CACIC,aACA,OAEMX,KAAKE,QAAQF,KAAKO,WAAWK,WACvC,CACIC,gBACA,OAAOb,KAAKE,QAAQF,KAAKO,WAAWK,WACxC,CACIE,mBACA,MAEM,KAAKd,KAAKU,SACpB,EAEJjB,EAAQE,OAASA,C,cCxCjBJ,OAAOC,eAAeC,EAAS,aAAc,CAAEC,OAAO,IACtDD,EAAQI,kBAAe,EA2BvBJ,EAAQI,aA1BR,MACIC,cACIE,KAAKe,UAAY,IAAIC,GACzB,CACAC,GAAGC,EAAOC,GACDnB,KAAKe,UAAUK,IAAIF,GAIpBlB,KAAKe,UAAUM,IAAIH,GAAOI,KAAKH,GAH/BnB,KAAKe,UAAUQ,IAAIL,EAAO,CAACC,GAKnC,CACAK,KAAKN,EAAOO,GACHzB,KAAKe,UAAUK,IAAIF,IAENlB,KAAKe,UAAUM,IAAIH,GAC3BQ,SAASP,IACfA,EAASM,EAAQ,GAEzB,CACAE,IAAIT,GACIlB,KAAKe,UAAUK,IAAIF,IACnBlB,KAAKe,UAAUa,OAAOV,EAE9B,E,cC1BJ3B,OAAOC,eAAeC,EAAS,aAAc,CAAEC,OAAO,IACtDD,EAAQoC,wBAAqB,EAoC7BpC,EAAQoC,mBAnCR,MACI/B,YAAYgC,EAASC,EAAQpB,GACzBX,KAAK8B,QAAUA,EACf9B,KAAK+B,OAASA,EACd/B,KAAKW,OAASA,EACdX,KAAKe,UAAY,IAAIC,IACrBhB,KAAK8B,QAAQE,iBAAiB,WAAYC,IACtC,MAAM,KAAEC,EAAI,QAAET,GAAYQ,EAAIzB,KAC1BR,KAAKe,UAAUM,IAAIa,IACDlC,KAAKe,UAAUM,IAAIa,GAC3BR,SAASP,IACfA,EAASM,EAAQ,GAEzB,GAER,CACAR,GAAGC,EAAOC,GACDnB,KAAKe,UAAUM,IAAIH,IACpBlB,KAAKe,UAAUQ,IAAIL,EAAO,CAACC,GAEnC,CACAK,KAAKN,EAAOO,GACR,MAAMU,EAAU,CACZD,KAAMhB,EACNO,WAEJzB,KAAK+B,OAAOK,YAAYD,EAASnC,KAAKW,OAC1C,CACA0B,cAAcnB,GAIV,OAHqBoB,GACVtC,KAAKiB,GAAGC,EAAOoB,EAG9B,E,cChCJ,IAAWC,EAHXhD,OAAOC,eAAeC,EAAS,aAAc,CAAEC,OAAO,IACtDD,EAAQ8C,eAAY,GAETA,EAOI9C,EAAQ8C,YAAc9C,EAAQ8C,UAAY,CAAC,IANnC,QAAI,UACvBA,EAAsB,WAAI,aAC1BA,EAAgB,KAAI,OACpBA,EAAe,IAAI,MACnBA,EAAgB,KAAI,OACpBA,EAAoB,SAAI,U,gBCT5BhD,OAAOC,eAAeC,EAAS,aAAc,CAAEC,OAAO,IACtDD,EAAQ+C,oBAAsB/C,EAAQgD,uBAAyBhD,EAAQiD,kBAAe,EACtF,MAAMC,EAAU,EAAQ,KAgBxBlD,EAAQiD,aAfchD,IAClB,MAAMkD,EAAW,CACb,CAACD,EAAQJ,UAAUM,MAAO,SAC1B,CAACF,EAAQJ,UAAUO,MAAO,KAC1B,CAACH,EAAQJ,UAAUQ,YAAa,UAChC,CAACJ,EAAQJ,UAAUS,KAAM,MACzB,CAACL,EAAQJ,UAAUU,UAAW,OAElC,IAAIC,EAAYP,EAAQJ,UAAUY,QAKlC,OAJA5D,OAAO6D,QAAQR,GAAUlB,SAAQ,EAAE2B,EAAKC,MAChCA,EAAQC,KAAK7D,KACbwD,EAAYG,EAAG,IAEhBH,CAAS,EAcpBzD,EAAQgD,uBAXwBS,IACV,CACd,CAACP,EAAQJ,UAAUY,SAAU,GAC7B,CAACR,EAAQJ,UAAUM,MAAO,GAC1B,CAACF,EAAQJ,UAAUO,MAAO,GAC1B,CAACH,EAAQJ,UAAUQ,YAAa,GAChC,CAACJ,EAAQJ,UAAUS,KAAM,GACzB,CAACL,EAAQJ,UAAUU,UAAW,IAEjBC,IAMrBzD,EAAQ+C,oBAHqBU,GAClBA,IAAcP,EAAQJ,UAAUM,KAAO,EAAI,C,gBChCtDtD,OAAOC,eAAeC,EAAS,aAAc,CAAEC,OAAO,IACtDD,EAAQ+D,eAAY,EACpB,MAAMC,EAAuB,EAAQ,KAC/Bd,EAAU,EAAQ,KAClBe,EAAU,EAAQ,KAClBC,EAAuB,EAAQ,KAC/BC,EAAW,EAAQ,KACzB,MAAMJ,UAAkBC,EAAqB5B,mBACzC/B,YAAY+D,GACR9D,MAAM+D,OAAQA,OAAOC,OAAQ,KAC7B/D,KAAK6D,OAASA,EACd7D,KAAKgE,OAASN,EAAQO,YAAYC,OAClClE,KAAKkD,UAAYP,EAAQJ,UAAUY,QACnCnD,KAAKmE,QAAU,GACfnE,KAAKoE,SAAWC,SAASC,eAAe,GAAGT,EAAO3B,cAClDlC,KAAKoE,SAASG,YAAcV,EAAOU,aAAe,GAClDvE,KAAKoE,SAASpC,iBAAiB,QAAShC,KAAKwE,QAAQC,KAAKzE,OAC1DA,KAAKoE,SAASpC,iBAAiB,OAAQhC,KAAK0E,OAAOD,KAAKzE,OACxDA,KAAKoE,SAASpC,iBAAiB,QAAShC,KAAK2E,SAASF,KAAKzE,OAC3DA,KAAK4E,iBAAmB5E,KAAK4E,iBAAiBH,KAAKzE,MACnDA,KAAK4E,mBACL5E,KAAK6E,iBAAmB7E,KAAK6E,iBAAiBJ,KAAKzE,MACnDA,KAAK6E,kBACT,CACAA,mBACI7E,KAAKiB,GAAG,eAAe,IAAMjB,KAAK8E,QAAQC,UAC1C/E,KAAKiB,GAAG,eAAgBV,IACpBqD,EAASjE,OAAOqF,cAAczE,WAAaA,CAAU,IAEzDP,KAAKiB,GAAG,mBAAoBiC,IACxBlD,KAAKkD,UAAYA,EACQ,QAArBlD,KAAK6D,OAAO3B,MAAoBlC,KAAK8E,QAAQpF,MAAMuF,SACnDjF,KAAK2E,SAAS,MACd3E,KAAKkF,sBACT,IAEJlF,KAAKiB,GAAG,aAAcT,KAClB,EAAImD,EAAqBwB,aAAa3E,GAAM4E,MAAMC,IAC9CrF,KAAKwB,KAAK,sBAAuB6D,EAAO,GAC1C,GAEV,CACAT,mBACI,MAAMU,EAAajB,SAASkB,YAAY,GACxChG,OAAO6D,QAAQpD,KAAK6D,OAAO2B,QAAQ9D,SAAQ,EAAE2B,EAAKoC,MAC9C,MAAMC,EAAcnG,OAAO6D,QAAQqC,GAAOE,KAAI,EAAEC,EAAMlG,KAI3C,GAHUkG,EACZC,QAAQ,yBAA0B,SAClCC,iBACiBpG,MAE1B4F,EAAWS,WAAW,GAAG1C,KAAOqC,EAAYM,KAAK,QAASV,EAAWW,SAAShB,OAAO,GAE7F,CACAC,sBACQlF,KAAKgE,SAAWN,EAAQO,YAAYC,SACpClE,KAAK8E,QAAQoB,UAAUC,OAAO,WAC9BnG,KAAK8E,QAAQoB,UAAUC,OAAO,UAE9BnG,KAAKgE,SAAWN,EAAQO,YAAYmC,UACpCpG,KAAK8E,QAAQoB,UAAUC,OAAO,WAC9BnG,KAAK8E,QAAQoB,UAAUG,IAAI,UAE3BrG,KAAKgE,SAAWN,EAAQO,YAAYqC,QACpCtG,KAAK8E,QAAQoB,UAAUC,OAAO,SAC9BnG,KAAK8E,QAAQoB,UAAUG,IAAI,WAEnC,CACAE,4BACIvG,KAAK8E,QAAQpF,MAAQM,KAAKwG,qBAC9B,CACAA,sBACI,OAAOxG,KAAK8E,QAAQpF,MAAMmG,QAAQ,MAAO,GAC7C,CACAY,cACSzG,KAAK8E,QAAQpF,MAAMuF,MAE5B,CACAyB,qBAAuB,CACvBC,WACS3G,KAAK8E,QAAQpF,MAAMuF,OAIxBjF,KAAK4G,OAAS,GAHV5G,KAAKgE,OAASN,EAAQO,YAAYC,MAI1C,CACAM,QAAQvC,GAAO,CACfyC,OAAOzC,GACHjC,KAAKkF,qBACT,CACAP,SAAS1C,GACLjC,KAAKuG,4BACLvG,KAAKyG,cACLzG,KAAK0G,qBACL1G,KAAK2G,WACL3G,KAAKgE,OAAUhE,KAAK4G,OAAO3B,OAErBvB,EAAQO,YAAYqC,MADpB5C,EAAQO,YAAYmC,QAE1B,MAAMS,EAAS,CACX3E,KAAMlC,KAAK6D,OAAO3B,KAClB8B,OAAQhE,KAAKgE,OACbtE,MAAOM,KAAKwG,sBACZM,aAAc9G,KAAK4G,OAAO,IAAM,IAEpC5G,KAAKwB,KAAK,eAAgBqF,EAC9B,CACI/B,cACA,OAAO9E,KAAKoE,QAChB,CACIJ,WAAOA,GACPhE,KAAK+G,QAAU/C,CACnB,CACIA,aACA,OAAOhE,KAAK+G,OAChB,CACI7D,gBACA,OAAOlD,KAAKgH,UAChB,CACI9D,cAAU+D,GACVjH,KAAKgH,WAAaC,CACtB,CACIL,WAAOA,GACP5G,KAAKmE,QAAUyC,CACnB,CACIA,aACA,OAAO5G,KAAKmE,OAChB,EAEJ1E,EAAQ+D,UAAYA,C,eChIpBjE,OAAOC,eAAeC,EAAS,aAAc,CAAEC,OAAO,IACtDD,EAAQyH,cAAW,EACnB,MAAMC,EAAc,EAAQ,KACtBC,EAAc,EAAQ,KAC5B,MAAMF,UAAiBC,EAAY3D,UAC/B1D,YAAY+D,GACR9D,MAAM8D,GACN7D,KAAK6D,OAASA,CAClB,CACA8C,WACI5G,MAAM4G,WACF3G,KAAK8E,QAAQpF,MAAMuF,UAAW,EAAImC,EAAY5E,qBAAqBxC,KAAKkD,YACxElD,KAAK4G,OAAOtF,KAAK,WAEzB,CACAoF,qBACI1G,KAAK8E,QAAQuC,aAAa,aAAa,EAAID,EAAY5E,qBAAqBxC,KAAKkD,WAAWoE,WAChG,EAEJ7H,EAAQyH,SAAWA,C,gBCnBnB3H,OAAOC,eAAeC,EAAS,aAAc,CAAEC,OAAO,IACtDD,EAAQ8H,yBAAsB,EAC9B,MAAMJ,EAAc,EAAQ,KAC5B,MAAMI,UAA4BJ,EAAY3D,UAC1C1D,YAAY+D,GACR9D,MAAM8D,GACN7D,KAAK6D,OAASA,CAClB,CACA8C,WACI5G,MAAM4G,WACN,MAAMa,EAAQ,IAAIC,KAEZC,GAAWF,EAAMG,cAAcL,WAAWM,MAAM,EAAG,GAEnDC,GAAWL,EAAMG,cAAcL,WAAWM,MAAM,EAAG,GADpC,GAEfE,EAAY9H,KAAKwG,sBAAsBoB,MAAM,EAAG,GAChDG,EAAW/H,KAAKwG,sBAAsBoB,MAAM,EAAG,GAKrD,GAJ0C,IAArBE,EAAU7C,QANX,yBAMuC1B,KAAKuE,IAE5D9H,KAAK4G,OAAOtF,KAAK,QAEqB,IAAtCtB,KAAKwG,sBAAsBvB,OAAc,CACzC,MAAM+C,EAAW,IAAIP,KACrBO,EAASC,aAAa,KAAI,IAAIR,MACzBE,cACAL,WACAM,MAAM,EAAG,KAAKG,KACnBC,EAASE,UAAUJ,EAAY,GAC3B9H,KAAKmI,cAAcH,GAAY,GAC/BhI,KAAK4G,OAAOtF,KAAK,SAEzB,CACwC,IAApByG,EAAS9C,SACxB8C,GAAYL,IACZK,GAAYF,GAEb7H,KAAK4G,OAAOtF,KAAK,OAEzB,CACA6G,cAAcH,GACV,MAAMR,EAAQ,IAAIC,KAClB,OAAQO,EAASI,WACbZ,EAAMY,WACN,IAAMJ,EAASL,cAAgBH,EAAMG,cAC7C,CACAlB,cACI1G,MAAM0G,cACN,MAAM4B,EAAQrI,KAAKwG,sBACdoB,MAAM,EAAG,GACTU,MAAM,WACXtI,KAAK8E,QAAQpF,MAAQ2I,EAAQA,EAAMrC,KAAK,KAAOhG,KAAK8E,QAAQpF,KAChE,CACAgH,qBACI1G,KAAK8E,QAAQuC,aAAa,YAAa,KACnCrH,KAAKwG,sBAAsBvB,QAAU,IACrCjF,KAAK2G,WACL3G,KAAKkF,sBAEb,EAEJzF,EAAQ8H,oBAAsBA,C,gBC5D9BhI,OAAOC,eAAeC,EAAS,aAAc,CAAEC,OAAO,IACtDD,EAAQ8I,iBAAc,EACtB,MAAM5F,EAAU,EAAQ,KAClByE,EAAc,EAAQ,KACtBD,EAAc,EAAQ,KAC5B,MAAMoB,UAAoBpB,EAAY3D,UAClC1D,YAAY+D,GACR9D,MAAM8D,GACN7D,KAAK6D,OAASA,CAClB,CACA8C,WACI5G,MAAM4G,WACN,MAAM/D,EAAW,CACb,CAACD,EAAQJ,UAAUY,SAAU,iBAC7B,CAACR,EAAQJ,UAAUM,MAAO,mBAC1B,CAACF,EAAQJ,UAAUO,MAAO,eAC1B,CAACH,EAAQJ,UAAUQ,YAAa,oBAChC,CAACJ,EAAQJ,UAAUS,KAAM,gBACzB,CAACL,EAAQJ,UAAUU,UAAW,iBAE9BjD,KAAKkD,YAAcP,EAAQJ,UAAUM,MACrC7C,KAAK4G,OAAOtF,KAAK,iBAEjBtB,KAAKkD,YAAcP,EAAQJ,UAAUU,UACrCjD,KAAK4G,OAAOtF,KAAK,eAEhBsB,EAAS5C,KAAKkD,WAAWK,KAAKvD,KAAKwG,wBACpCxG,KAAK4G,OAAOtF,KAAK,QAEzB,CACAmF,cACI,MAAM4B,EAAQrI,KAAKwG,sBAAsB8B,MAAM,WAC/CtI,KAAK8E,QAAQpF,MAAQ2I,EAAQA,EAAMrC,KAAK,KAAOhG,KAAK8E,QAAQpF,KAChE,CACAgH,qBACI1G,KAAKkD,WAAY,EAAIkE,EAAY1E,cAAc1C,KAAKwG,uBACpDxG,KAAKwB,KAAK,oBAAqBxB,KAAKkD,WACpC,MACMsF,GAAY,EAAIpB,EAAY3E,wBAAwBzC,KAAKkD,WACzDuF,EAAcC,KAAKC,MAAMH,EAFV,IAGhBA,EAHgB,GAGa,EAAI,EAAI,GAC1CxI,KAAK8E,QAAQuC,aAAa,aAAcmB,EAAYC,GAAanB,YAC7DtH,KAAKwG,sBAAsBvB,QAAUuD,IACrCxI,KAAK2G,WACL3G,KAAKkF,sBAEb,EAEJzF,EAAQ8I,YAAcA,C,cC7CtB,IAAWtE,EAHX1E,OAAOC,eAAeC,EAAS,aAAc,CAAEC,OAAO,IACtDD,EAAQwE,iBAAc,GAEXA,EAIMxE,EAAQwE,cAAgBxE,EAAQwE,YAAc,CAAC,IAHhDA,EAAoB,OAAI,GAAK,SACzCA,EAAYA,EAAqB,QAAI,GAAK,UAC1CA,EAAYA,EAAmB,OAAK,GAAK,O,sBCN7C,IAAI2E,EAAa5I,MAAQA,KAAK4I,WAAc,SAAUC,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GAC/C,SAASC,EAAU1J,GAAS,IAAM2J,EAAKL,EAAUM,KAAK5J,GAAkC,CAAvB,MAAO6J,GAAKJ,EAAOI,EAAI,CAAE,CAC1F,SAASC,EAAS9J,GAAS,IAAM2J,EAAKL,EAAiB,MAAEtJ,GAAkC,CAAvB,MAAO6J,GAAKJ,EAAOI,EAAI,CAAE,CAC7F,SAASF,EAAKhE,GAJlB,IAAe3F,EAIa2F,EAAOoE,KAAOP,EAAQ7D,EAAO3F,QAJ1CA,EAIyD2F,EAAO3F,MAJhDA,aAAiBqJ,EAAIrJ,EAAQ,IAAIqJ,GAAE,SAAUG,GAAWA,EAAQxJ,EAAQ,KAIjB0F,KAAKgE,EAAWI,EAAW,CAC7GH,GAAML,EAAYA,EAAUU,MAAMb,EAASC,GAAc,KAAKQ,OAClE,GACJ,EACA/J,OAAOC,eAAeC,EAAS,aAAc,CAAEC,OAAO,IACtDD,EAAQ0F,iBAAc,EACtB,MAAMvB,EAAW,EAAQ,KAiBzBnE,EAAQ0F,YAhBa3E,GAASoI,OAAU,OAAQ,OAAQ,GAAQ,YAC5D,IACI,MAAMe,EAAa,GAAG/F,EAASjE,OAAOqF,cAAcnE,oCAC9C+I,QAAiBC,MAAMF,EAAY,CACrCG,KAAMC,KAAKC,UAAUxJ,GACrByJ,OAAQ,OACRC,QAAS,CACL,eAAgB,sBAGxB,OAAOjB,QAAQC,QAAQU,EAASO,OAIpC,CAFA,MAAOC,GACH,OAAOnB,QAAQE,OAAOiB,EAC1B,CACJ,G,GC3BIC,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBE,IAAjBD,EACH,OAAOA,EAAa/K,QAGrB,IAAIiL,EAASL,EAAyBE,GAAY,CAGjD9K,QAAS,CAAC,GAOX,OAHAkL,EAAoBJ,GAAUK,KAAKF,EAAOjL,QAASiL,EAAQA,EAAOjL,QAAS6K,GAGpEI,EAAOjL,OACf,C,MCpBA,MAAMoL,EAAgB,EAAQ,KACxBC,EAAwB,EAAQ,KAChCC,EAAa,EAAQ,IAC3B1G,SAASrC,iBAAiB,oBAAoB,KAC1C,IAAK8B,OAAOkH,SAASC,OAAOhG,OACxB,OACJ,MAAMpB,EAASkG,KAAKmB,MAAMC,mBAAmBrH,OAAOkH,SAASC,OAAOpF,QAAQ,IAAK,MAYjF,IAAIuF,EAXJ,GAAG1J,QAAQkJ,KAAKvG,SAASgH,iBAAiB,SAAUC,IAC5CA,EAAKC,KAAO,GAAG1H,EAAO3B,YACtBoJ,EAAKnF,SAGLmF,EAAKtJ,iBAAiB,WAAYC,IACd,UAAZA,EAAIoB,KACJpB,EAAIuJ,gBAAgB,GAEhC,IAGgB,WAAhB3H,EAAO3B,OACPkJ,EAAe,IAAIP,EAActC,YAAY1E,IAE7B,mBAAhBA,EAAO3B,OACPkJ,EAAe,IAAIN,EAAsBvD,oBAAoB1D,IAE7C,QAAhBA,EAAO3B,OACPkJ,EAAe,IAAIL,EAAW7D,SAASrD,GAC3C,G","sources":["webpack://91app-payment-sdk/./src/config/index.ts","webpack://91app-payment-sdk/./src/events/eventEmitter.ts","webpack://91app-payment-sdk/./src/events/postMessageEmitter.ts","webpack://91app-payment-sdk/./src/payments/creditCard/enums/index.ts","webpack://91app-payment-sdk/./src/payments/creditCard/utilities/index.ts","webpack://91app-payment-sdk/./src/payments/fields/components/baseField.ts","webpack://91app-payment-sdk/./src/payments/fields/components/ccvField.ts","webpack://91app-payment-sdk/./src/payments/fields/components/expirationDateField.ts","webpack://91app-payment-sdk/./src/payments/fields/components/numberField.ts","webpack://91app-payment-sdk/./src/payments/fields/enums/index.ts","webpack://91app-payment-sdk/./src/services/creditCard.service.ts","webpack://91app-payment-sdk/webpack/bootstrap","webpack://91app-payment-sdk/./src/payments/fields/index.ts"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Config = void 0;\nconst eventEmitter_1 = require(\"@/src/events/eventEmitter\");\nclass Config extends eventEmitter_1.EventEmitter {\n    constructor() {\n        super();\n        this._clientData = null;\n        this._origin = {\n            sandbox: 'https://gadget.payment.qa.91dev.tw',\n            production: 'https://gadget.payment.91app.com',\n        };\n    }\n    static getInstance() {\n        if (!Config._instance)\n            Config._instance = new Config();\n        return Config._instance;\n    }\n    set clientData(data) {\n        this._clientData = Object.assign({}, data);\n    }\n    get clientData() {\n        return this._clientData;\n    }\n    get version() {\n        return process.env.VERSION;\n    }\n    get origin() {\n        return process.env.NODE_ENV === 'development'\n            ? '*'\n            : this._origin[this.clientData.serverType];\n    }\n    get apiDomain() {\n        return this._origin[this.clientData.serverType];\n    }\n    get iframeDomain() {\n        return process.env.NODE_ENV === 'development'\n            ? 'http://localhost:8001'\n            : `./${this.version}`;\n    }\n}\nexports.Config = Config;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EventEmitter = void 0;\nclass EventEmitter {\n    constructor() {\n        this.listeners = new Map();\n    }\n    on(event, callback) {\n        if (!this.listeners.has(event)) {\n            this.listeners.set(event, [callback]);\n        }\n        else {\n            this.listeners.get(event).push(callback);\n        }\n    }\n    emit(event, payload) {\n        if (!this.listeners.has(event))\n            return;\n        const callbacks = this.listeners.get(event);\n        callbacks.forEach((callback) => {\n            callback(payload);\n        });\n    }\n    off(event) {\n        if (this.listeners.has(event)) {\n            this.listeners.delete(event);\n        }\n    }\n}\nexports.EventEmitter = EventEmitter;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PostMessageEmitter = void 0;\nclass PostMessageEmitter {\n    constructor(current, target, origin) {\n        this.current = current;\n        this.target = target;\n        this.origin = origin;\n        this.listeners = new Map();\n        this.current.addEventListener('message', (evt) => {\n            const { type, payload } = evt.data;\n            if (this.listeners.get(type)) {\n                const callbacks = this.listeners.get(type);\n                callbacks.forEach((callback) => {\n                    callback(payload);\n                });\n            }\n        });\n    }\n    on(event, callback) {\n        if (!this.listeners.get(event)) {\n            this.listeners.set(event, [callback]);\n        }\n    }\n    emit(event, payload) {\n        const message = {\n            type: event,\n            payload,\n        };\n        this.target.postMessage(message, this.origin);\n    }\n    registerEvent(event) {\n        const eventBinder = (handler) => {\n            return this.on(event, handler);\n        };\n        return eventBinder;\n    }\n}\nexports.PostMessageEmitter = PostMessageEmitter;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CardBrand = void 0;\nvar CardBrand;\n(function (CardBrand) {\n    CardBrand[\"Unknown\"] = \"Unknown\";\n    CardBrand[\"MasterCard\"] = \"MasterCard\";\n    CardBrand[\"VISA\"] = \"VISA\";\n    CardBrand[\"JCB\"] = \"JCB\";\n    CardBrand[\"AMEX\"] = \"AMEX\";\n    CardBrand[\"UnionPay\"] = \"UnionPay\";\n})(CardBrand = exports.CardBrand || (exports.CardBrand = {}));\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getCardCCVMaxLength = exports.getCardNumberMaxLength = exports.getCardBrand = void 0;\nconst enums_1 = require(\"@/payments/creditCard/enums\");\nconst getCardBrand = (value) => {\n    const patterns = {\n        [enums_1.CardBrand.AMEX]: /^3[47]/,\n        [enums_1.CardBrand.VISA]: /^4/,\n        [enums_1.CardBrand.MasterCard]: /^5[1-5]/,\n        [enums_1.CardBrand.JCB]: /^35/,\n        [enums_1.CardBrand.UnionPay]: /^62/,\n    };\n    let cardBrand = enums_1.CardBrand.Unknown;\n    Object.entries(patterns).forEach(([key, pattern]) => {\n        if (pattern.test(value))\n            cardBrand = key;\n    });\n    return cardBrand;\n};\nexports.getCardBrand = getCardBrand;\nconst getCardNumberMaxLength = (cardBrand) => {\n    const maxLength = {\n        [enums_1.CardBrand.Unknown]: 16,\n        [enums_1.CardBrand.AMEX]: 15,\n        [enums_1.CardBrand.VISA]: 16,\n        [enums_1.CardBrand.MasterCard]: 16,\n        [enums_1.CardBrand.JCB]: 16,\n        [enums_1.CardBrand.UnionPay]: 16,\n    };\n    return maxLength[cardBrand];\n};\nexports.getCardNumberMaxLength = getCardNumberMaxLength;\nconst getCardCCVMaxLength = (cardBrand) => {\n    return cardBrand === enums_1.CardBrand.AMEX ? 4 : 3;\n};\nexports.getCardCCVMaxLength = getCardCCVMaxLength;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BaseField = void 0;\nconst postMessageEmitter_1 = require(\"@/src/events/postMessageEmitter\");\nconst enums_1 = require(\"@/payments/creditCard/enums\");\nconst enums_2 = require(\"@/payments/fields/enums\");\nconst creditCard_service_1 = require(\"@/src/services/creditCard.service\");\nconst config_1 = require(\"@/src/config\");\nclass BaseField extends postMessageEmitter_1.PostMessageEmitter {\n    constructor(params) {\n        super(window, window.parent, '*');\n        this.params = params;\n        this.status = enums_2.FieldStatus.Normal;\n        this.cardBrand = enums_1.CardBrand.Unknown;\n        this._errors = [];\n        this._element = document.getElementById(`${params.type}-field`);\n        this._element.placeholder = params.placeholder || '';\n        this._element.addEventListener('foucs', this.onFocus.bind(this));\n        this._element.addEventListener('blur', this.onBlur.bind(this));\n        this._element.addEventListener('input', this.onChange.bind(this));\n        this.createStyleSheet = this.createStyleSheet.bind(this);\n        this.createStyleSheet();\n        this.getParentMessage = this.getParentMessage.bind(this);\n        this.getParentMessage();\n    }\n    getParentMessage() {\n        this.on('FOCUS_FIELD', () => this.element.focus());\n        this.on('SYNC_CLIENT', (clientData) => {\n            config_1.Config.getInstance().clientData = clientData;\n        });\n        this.on('SYNC_CARD_BRAND', (cardBrand) => {\n            this.cardBrand = cardBrand;\n            if (this.params.type === 'ccv' && !!this.element.value.length) {\n                this.onChange(null);\n                this.changeElementStatus();\n            }\n        });\n        this.on('GET_TOKEN', (data) => {\n            (0, creditCard_service_1.getTxnToken)(data).then((result) => {\n                this.emit('GET_TOKEN_COMPLETED', result);\n            });\n        });\n    }\n    createStyleSheet() {\n        const styleSheet = document.styleSheets[0];\n        Object.entries(this.params.styles).forEach(([key, style]) => {\n            const formatStyle = Object.entries(style).map(([name, value]) => {\n                const styleKey = name\n                    .replace(/([A-Z]+)*([A-Z][a-z])/g, '$1-$2')\n                    .toLowerCase();\n                return `${styleKey}:${value}`;\n            });\n            styleSheet.insertRule(`${key}{${formatStyle.join(';')}}`, styleSheet.cssRules.length);\n        });\n    }\n    changeElementStatus() {\n        if (this.status === enums_2.FieldStatus.Normal) {\n            this.element.classList.remove('invalid');\n            this.element.classList.remove('valid');\n        }\n        if (this.status === enums_2.FieldStatus.Success) {\n            this.element.classList.remove('invalid');\n            this.element.classList.add('valid');\n        }\n        if (this.status === enums_2.FieldStatus.Error) {\n            this.element.classList.remove('valid');\n            this.element.classList.add('invalid');\n        }\n    }\n    removeNotAllowedCharacter() {\n        this.element.value = this.getUnformattedValue();\n    }\n    getUnformattedValue() {\n        return this.element.value.replace(/\\D/g, '');\n    }\n    formatValue() {\n        if (!this.element.value.length)\n            return;\n    }\n    afterValueFormated() { }\n    validate() {\n        if (!this.element.value.length) {\n            this.status = enums_2.FieldStatus.Normal;\n            return;\n        }\n        this.errors = [];\n    }\n    onFocus(evt) { }\n    onBlur(evt) {\n        this.changeElementStatus();\n    }\n    onChange(evt) {\n        this.removeNotAllowedCharacter();\n        this.formatValue();\n        this.afterValueFormated();\n        this.validate();\n        this.status = !this.errors.length\n            ? enums_2.FieldStatus.Success\n            : enums_2.FieldStatus.Error;\n        const update = {\n            type: this.params.type,\n            status: this.status,\n            value: this.getUnformattedValue(),\n            errorMessage: this.errors[0] || '',\n        };\n        this.emit('UPDATE_FIELD', update);\n    }\n    get element() {\n        return this._element;\n    }\n    set status(status) {\n        this._status = status;\n    }\n    get status() {\n        return this._status;\n    }\n    get cardBrand() {\n        return this._cardBrand;\n    }\n    set cardBrand(brand) {\n        this._cardBrand = brand;\n    }\n    set errors(errors) {\n        this._errors = errors;\n    }\n    get errors() {\n        return this._errors;\n    }\n}\nexports.BaseField = BaseField;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CCVField = void 0;\nconst baseField_1 = require(\"@/payments/fields/components/baseField\");\nconst utilities_1 = require(\"@/payments/creditCard/utilities\");\nclass CCVField extends baseField_1.BaseField {\n    constructor(params) {\n        super(params);\n        this.params = params;\n    }\n    validate() {\n        super.validate();\n        if (this.element.value.length !== (0, utilities_1.getCardCCVMaxLength)(this.cardBrand)) {\n            this.errors.push('未填寫完成或錯誤');\n        }\n    }\n    afterValueFormated() {\n        this.element.setAttribute('maxlength', (0, utilities_1.getCardCCVMaxLength)(this.cardBrand).toString());\n    }\n}\nexports.CCVField = CCVField;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ExpirationDateField = void 0;\nconst baseField_1 = require(\"@/payments/fields/components/baseField\");\nclass ExpirationDateField extends baseField_1.BaseField {\n    constructor(params) {\n        super(params);\n        this.params = params;\n    }\n    validate() {\n        super.validate();\n        const today = new Date();\n        const monthParten = /(^0?[1-9]$)|(^1[0-2]$)/;\n        const minYear = +today.getFullYear().toString().slice(2, 4);\n        const maxYearRange = 30;\n        const maxYear = +today.getFullYear().toString().slice(2, 4) + maxYearRange;\n        const cardMonth = this.getUnformattedValue().slice(0, 2);\n        const cardYear = this.getUnformattedValue().slice(2, 4);\n        const isMonthVaild = cardMonth.length === 2 && monthParten.test(cardMonth);\n        if (!isMonthVaild) {\n            this.errors.push('月份錯誤');\n        }\n        if (this.getUnformattedValue().length === 4) {\n            const cardDate = new Date();\n            cardDate.setFullYear(+`${+new Date()\n                .getFullYear()\n                .toString()\n                .slice(0, 2)}${cardYear}`);\n            cardDate.setMonth(+cardMonth - 1);\n            if (this.getDiffMonths(cardDate) < 0) {\n                this.errors.push('已超過到期日');\n            }\n        }\n        const isYearVaild = cardYear.length === 2 &&\n            +cardYear >= minYear &&\n            +cardYear <= maxYear;\n        if (!isYearVaild) {\n            this.errors.push('年份錯誤');\n        }\n    }\n    getDiffMonths(cardDate) {\n        const today = new Date();\n        return (cardDate.getMonth() -\n            today.getMonth() +\n            12 * (cardDate.getFullYear() - today.getFullYear()));\n    }\n    formatValue() {\n        super.formatValue();\n        const split = this.getUnformattedValue()\n            .slice(0, 4)\n            .match(/.{1,2}/g);\n        this.element.value = split ? split.join('/') : this.element.value;\n    }\n    afterValueFormated() {\n        this.element.setAttribute('maxlength', '5');\n        if (this.getUnformattedValue().length >= 4) {\n            this.validate();\n            this.changeElementStatus();\n        }\n    }\n}\nexports.ExpirationDateField = ExpirationDateField;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NumberField = void 0;\nconst enums_1 = require(\"@/payments/creditCard/enums\");\nconst utilities_1 = require(\"@/payments/creditCard/utilities\");\nconst baseField_1 = require(\"@/payments/fields/components/baseField\");\nclass NumberField extends baseField_1.BaseField {\n    constructor(params) {\n        super(params);\n        this.params = params;\n    }\n    validate() {\n        super.validate();\n        const patterns = {\n            [enums_1.CardBrand.Unknown]: /^[0-9]{15,16}$/,\n            [enums_1.CardBrand.AMEX]: /^3[47][0-9]{13}$/,\n            [enums_1.CardBrand.VISA]: /^4[0-9]{15}$/,\n            [enums_1.CardBrand.MasterCard]: /^5[1-5][0-9]{14}$/,\n            [enums_1.CardBrand.JCB]: /^35[0-9]{14}$/,\n            [enums_1.CardBrand.UnionPay]: /^62[0-9]{14}$/,\n        };\n        if (this.cardBrand === enums_1.CardBrand.AMEX) {\n            this.errors.push('暫不支援美國運通信用卡交易');\n        }\n        if (this.cardBrand === enums_1.CardBrand.UnionPay) {\n            this.errors.push('暫不支援銀聯信用卡交易');\n        }\n        if (!patterns[this.cardBrand].test(this.getUnformattedValue())) {\n            this.errors.push('未填寫完成');\n        }\n    }\n    formatValue() {\n        const split = this.getUnformattedValue().match(/.{1,4}/g);\n        this.element.value = split ? split.join(' ') : this.element.value;\n    }\n    afterValueFormated() {\n        this.cardBrand = (0, utilities_1.getCardBrand)(this.getUnformattedValue());\n        this.emit('UPDATE_CARD_BRAND', this.cardBrand);\n        const formatLength = 4;\n        const maxlength = (0, utilities_1.getCardNumberMaxLength)(this.cardBrand);\n        const spaceLength = Math.floor(maxlength / formatLength) -\n            (maxlength % formatLength === 0 ? 1 : 0);\n        this.element.setAttribute('maxlength', (maxlength + spaceLength).toString());\n        if (this.getUnformattedValue().length >= maxlength) {\n            this.validate();\n            this.changeElementStatus();\n        }\n    }\n}\nexports.NumberField = NumberField;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FieldStatus = void 0;\nvar FieldStatus;\n(function (FieldStatus) {\n    FieldStatus[FieldStatus[\"Normal\"] = 0] = \"Normal\";\n    FieldStatus[FieldStatus[\"Success\"] = 1] = \"Success\";\n    FieldStatus[FieldStatus[\"Error\"] = -1] = \"Error\";\n})(FieldStatus = exports.FieldStatus || (exports.FieldStatus = {}));\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getTxnToken = void 0;\nconst config_1 = require(\"../config\");\nconst getTxnToken = (data) => __awaiter(void 0, void 0, void 0, function* () {\n    try {\n        const requestUrl = `${config_1.Config.getInstance().apiDomain}/api/Payment/GetTxnToken`;\n        const response = yield fetch(requestUrl, {\n            body: JSON.stringify(data),\n            method: 'POST',\n            headers: {\n                'content-type': 'application/json',\n            },\n        });\n        return Promise.resolve(response.json());\n    }\n    catch (error) {\n        return Promise.reject(error);\n    }\n});\nexports.getTxnToken = getTxnToken;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst numberField_1 = require(\"@/payments/fields/components/numberField\");\nconst expirationDateField_1 = require(\"@/payments/fields/components/expirationDateField\");\nconst ccvField_1 = require(\"@/payments/fields/components/ccvField\");\ndocument.addEventListener('DOMContentLoaded', () => {\n    if (!window.location.search.length)\n        return;\n    const params = JSON.parse(decodeURIComponent(window.location.search.replace('?', '')));\n    [].forEach.call(document.querySelectorAll('form'), (form) => {\n        if (form.id !== `${params.type}-form`) {\n            form.remove();\n        }\n        else {\n            form.addEventListener('keydown', (evt) => {\n                if (evt.key === 'Enter')\n                    evt.preventDefault();\n            });\n        }\n    });\n    let currentField;\n    if (params.type === 'number') {\n        currentField = new numberField_1.NumberField(params);\n    }\n    if (params.type === 'expirationDate') {\n        currentField = new expirationDateField_1.ExpirationDateField(params);\n    }\n    if (params.type === 'ccv') {\n        currentField = new ccvField_1.CCVField(params);\n    }\n});\n"],"names":["Object","defineProperty","exports","value","Config","eventEmitter_1","EventEmitter","constructor","super","this","_clientData","_origin","sandbox","production","static","_instance","clientData","data","assign","version","origin","serverType","apiDomain","iframeDomain","listeners","Map","on","event","callback","has","get","push","set","emit","payload","forEach","off","delete","PostMessageEmitter","current","target","addEventListener","evt","type","message","postMessage","registerEvent","handler","CardBrand","getCardCCVMaxLength","getCardNumberMaxLength","getCardBrand","enums_1","patterns","AMEX","VISA","MasterCard","JCB","UnionPay","cardBrand","Unknown","entries","key","pattern","test","BaseField","postMessageEmitter_1","enums_2","creditCard_service_1","config_1","params","window","parent","status","FieldStatus","Normal","_errors","_element","document","getElementById","placeholder","onFocus","bind","onBlur","onChange","createStyleSheet","getParentMessage","element","focus","getInstance","length","changeElementStatus","getTxnToken","then","result","styleSheet","styleSheets","styles","style","formatStyle","map","name","replace","toLowerCase","insertRule","join","cssRules","classList","remove","Success","add","Error","removeNotAllowedCharacter","getUnformattedValue","formatValue","afterValueFormated","validate","errors","update","errorMessage","_status","_cardBrand","brand","CCVField","baseField_1","utilities_1","setAttribute","toString","ExpirationDateField","today","Date","minYear","getFullYear","slice","maxYear","cardMonth","cardYear","cardDate","setFullYear","setMonth","getDiffMonths","getMonth","split","match","NumberField","maxlength","spaceLength","Math","floor","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","done","apply","requestUrl","response","fetch","body","JSON","stringify","method","headers","json","error","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","module","__webpack_modules__","call","numberField_1","expirationDateField_1","ccvField_1","location","search","parse","decodeURIComponent","currentField","querySelectorAll","form","id","preventDefault"],"sourceRoot":""}