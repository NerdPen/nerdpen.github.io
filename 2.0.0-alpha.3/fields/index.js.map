{"version":3,"file":"fields/index.js?t=779761c218e2ba05d9e1","mappings":"wCACAA,OAAOC,eAAeC,EAAS,aAAc,CAAEC,OAAO,IACtDD,EAAQE,YAAS,EACjB,MAAMC,EAAiB,EAAQ,KAC/B,MAAMD,UAAeC,EAAeC,aAChCC,cACIC,QACAC,KAAKC,YAAc,KACnBD,KAAKE,QAAU,CACXC,QAAS,qCACTC,WAAY,mCAEpB,CACAC,qBAGI,OAFKV,EAAOW,YACRX,EAAOW,UAAY,IAAIX,GACpBA,EAAOW,SAClB,CACIC,eAAWC,GACXR,KAAKC,YAAcV,OAAOkB,OAAO,CAAC,EAAGD,EACzC,CACID,iBACA,OAAOP,KAAKC,WAChB,CACIS,cACA,MAAO,eACX,CACIC,aACA,OAEMX,KAAKE,QAAQF,KAAKO,WAAWK,WACvC,CACIC,gBACA,OAAOb,KAAKE,QAAQF,KAAKO,WAAWK,WACxC,CACIE,mBACA,MAEM,KAAKd,KAAKU,SACpB,EAEJjB,EAAQE,OAASA,C,cCxCjBJ,OAAOC,eAAeC,EAAS,aAAc,CAAEC,OAAO,IACtDD,EAAQI,kBAAe,EA2BvBJ,EAAQI,aA1BR,MACIC,cACIE,KAAKe,UAAY,IAAIC,GACzB,CACAC,GAAGC,EAAOC,GACDnB,KAAKe,UAAUK,IAAIF,GAIpBlB,KAAKe,UAAUM,IAAIH,GAAOI,KAAKH,GAH/BnB,KAAKe,UAAUQ,IAAIL,EAAO,CAACC,GAKnC,CACAK,KAAKN,EAAOO,GACHzB,KAAKe,UAAUK,IAAIF,IAENlB,KAAKe,UAAUM,IAAIH,GAC3BQ,SAASP,IACfA,EAASM,EAAQ,GAEzB,CACAE,IAAIT,GACIlB,KAAKe,UAAUK,IAAIF,IACnBlB,KAAKe,UAAUa,OAAOV,EAE9B,E,cC1BJ3B,OAAOC,eAAeC,EAAS,aAAc,CAAEC,OAAO,IACtDD,EAAQoC,wBAAqB,EAoC7BpC,EAAQoC,mBAnCR,MACI/B,YAAYgC,EAASC,EAAQpB,GACzBX,KAAK8B,QAAUA,EACf9B,KAAK+B,OAASA,EACd/B,KAAKW,OAASA,EACdX,KAAKe,UAAY,IAAIC,IACrBhB,KAAK8B,QAAQE,iBAAiB,WAAYC,IACtC,MAAM,KAAEC,EAAI,QAAET,GAAYQ,EAAIzB,KAC1BR,KAAKe,UAAUM,IAAIa,IACDlC,KAAKe,UAAUM,IAAIa,GAC3BR,SAASP,IACfA,EAASM,EAAQ,GAEzB,GAER,CACAR,GAAGC,EAAOC,GACDnB,KAAKe,UAAUM,IAAIH,IACpBlB,KAAKe,UAAUQ,IAAIL,EAAO,CAACC,GAEnC,CACAK,KAAKN,EAAOO,GACR,MAAMU,EAAU,CACZD,KAAMhB,EACNO,WAEJzB,KAAK+B,OAAOK,YAAYD,EAASnC,KAAKW,OAC1C,CACA0B,cAAcnB,GAIV,OAHqBoB,GACVtC,KAAKiB,GAAGC,EAAOoB,EAG9B,E,cChCJ,IAAWC,EAHXhD,OAAOC,eAAeC,EAAS,aAAc,CAAEC,OAAO,IACtDD,EAAQ8C,eAAY,GAETA,EAOI9C,EAAQ8C,YAAc9C,EAAQ8C,UAAY,CAAC,IANnC,QAAI,UACvBA,EAAsB,WAAI,aAC1BA,EAAgB,KAAI,OACpBA,EAAe,IAAI,MACnBA,EAAgB,KAAI,OACpBA,EAAoB,SAAI,U,gBCT5BhD,OAAOC,eAAeC,EAAS,aAAc,CAAEC,OAAO,IACtDD,EAAQ+C,kBAAe,EACvB,MAAMC,EAAU,EAAQ,KAgBxBhD,EAAQ+C,aAfc9C,IAClB,MAAMgD,EAAW,CACb,CAACD,EAAQF,UAAUI,MAAO,SAC1B,CAACF,EAAQF,UAAUK,MAAO,KAC1B,CAACH,EAAQF,UAAUM,YAAa,UAChC,CAACJ,EAAQF,UAAUO,KAAM,MACzB,CAACL,EAAQF,UAAUQ,UAAW,OAElC,IAAIC,EAAYP,EAAQF,UAAUU,QAKlC,OAJA1D,OAAO2D,KAAKR,GAAUhB,SAASyB,IACvBT,EAASS,GAAKC,KAAK1D,KACnBsD,EAAYG,EAAG,IAEhBH,CAAS,C,gBChBpBzD,OAAOC,eAAeC,EAAS,aAAc,CAAEC,OAAO,IACtDD,EAAQ4D,eAAY,EACpB,MAAMC,EAAuB,EAAQ,KAC/Bb,EAAU,EAAQ,KAClBc,EAAU,EAAQ,KAClBC,EAAuB,EAAQ,KAC/BC,EAAW,EAAQ,KACzB,MAAMJ,UAAkBC,EAAqBzB,mBACzC/B,YAAY4D,GACR3D,MAAM4D,OAAQA,OAAOC,OAAQ,KAC7B5D,KAAK0D,OAASA,EACd1D,KAAK6D,QAAUN,EAAQO,YAAYC,OACnC/D,KAAKgE,WAAavB,EAAQF,UAAUU,QACpCjD,KAAKiE,cAAgB,GACrBjE,KAAKkE,iBAAmBlE,KAAKkE,iBAAiBC,KAAKnE,MACnD,MAAMoE,EAAK,SAASV,EAAOxB,OAC3BlC,KAAKqE,SAAWC,SAASC,eAAeH,GACpCV,EAAOc,cACPxE,KAAKqE,SAASG,YAAcd,EAAOc,aAEvCxE,KAAKqE,SAASrC,iBAAiB,QAAShC,KAAKyE,QAAQN,KAAKnE,OAC1DA,KAAKqE,SAASrC,iBAAiB,OAAQhC,KAAK0E,OAAOP,KAAKnE,OACxDA,KAAKqE,SAASrC,iBAAiB,QAAShC,KAAK2E,SAASR,KAAKnE,OAC3DA,KAAK4E,sBACL5E,KAAKkE,kBACT,CACAU,sBACI5E,KAAKiB,GAAG,eAAe,IAAMjB,KAAK6E,QAAQC,UAC1C9E,KAAKiB,GAAG,eAAgBV,IACpBkD,EAAS9D,OAAOoF,cAAcxE,WAAaA,CAAU,IAEzDP,KAAKiB,GAAG,mBAAoB+B,IACxBhD,KAAKgD,UAAYA,CAAS,IAE9BhD,KAAKiB,GAAG,aAAcT,KAClB,EAAIgD,EAAqBwB,aAAaxE,GAAMyE,MAAMC,IAC9ClF,KAAKwB,KAAK,sBAAuB0D,EAAO,GAC1C,GAEV,CACAhB,mBACI,MAAMiB,EAAab,SAASc,YAAY,GACxC7F,OAAO8F,QAAQrF,KAAK0D,OAAO4B,QAAQ5D,SAAQ,EAAEyB,EAAKoC,MAC9C,MAAMC,EAAcjG,OAAO8F,QAAQE,GAAOE,KAAI,EAAEC,EAAMhG,KAI3C,GAHUgG,EACZC,QAAQ,yBAA0B,SAClCC,iBACiBlG,MAE1ByF,EAAWU,WAAW,GAAG1C,KAAOqC,EAAYM,KAAK,QAASX,EAAWY,SAASC,OAAO,GAE7F,CACAC,yBACoB,cACH7C,KAAKpD,KAAKqE,SAAS3E,SAC5BM,KAAKqE,SAAS3E,MAAQM,KAAKqE,SAAS3E,MAAMwG,MAAM,GAAI,GAE5D,CACAC,WACQnG,KAAKoG,SAAW7C,EAAQO,YAAYC,SACpC/D,KAAK6E,QAAQwB,UAAUC,OAAO,WAC9BtG,KAAK6E,QAAQwB,UAAUC,OAAO,UAE9BtG,KAAKoG,SAAW7C,EAAQO,YAAYyC,UACpCvG,KAAK6E,QAAQwB,UAAUC,OAAO,WAC9BtG,KAAK6E,QAAQwB,UAAUG,IAAI,UAE3BxG,KAAKoG,SAAW7C,EAAQO,YAAY2C,QACpCzG,KAAK6E,QAAQwB,UAAUC,OAAO,SAC9BtG,KAAK6E,QAAQwB,UAAUG,IAAI,WAEnC,CACAE,sBACI,OAAO1G,KAAK6E,QAAQnF,KACxB,CACAiH,cACS3G,KAAK6E,QAAQnF,MAAMsG,MAE5B,CACAvB,QAAQxC,GAAO,CACfyC,OAAOzC,GAAO,CACd0C,SAAS1C,GACLjC,KAAKiG,yBACLjG,KAAKmG,WACLnG,KAAK2G,cACL,MAAMC,EAAS,CACX1E,KAAMlC,KAAK0D,OAAOxB,KAClBkE,OAAQpG,KAAKoG,OACb1G,MAAOM,KAAK0G,sBACZG,aAAc7G,KAAK6G,cAEvB7G,KAAKwB,KAAK,eAAgBoF,EAC9B,CACI/B,cACA,OAAO7E,KAAKqE,QAChB,CACI+B,WAAOA,GACPpG,KAAK6D,QAAUuC,CACnB,CACIA,aACA,OAAOpG,KAAK6D,OAChB,CACIb,gBACA,OAAOhD,KAAKgE,UAChB,CACIhB,cAAU8D,GACV9G,KAAKgE,WAAa8C,CACtB,CACID,iBAAa1E,GACbnC,KAAKiE,cAAgB9B,CACzB,CACI0E,mBACA,OAAO7G,KAAKoG,SAAW7C,EAAQO,YAAY2C,MAAQzG,KAAKiE,cAAgB,EAC5E,EAEJxE,EAAQ4D,UAAYA,C,eCnHpB9D,OAAOC,eAAeC,EAAS,aAAc,CAAEC,OAAO,IACtDD,EAAQsH,cAAW,EACnB,MAAMtE,EAAU,EAAQ,KAClBc,EAAU,EAAQ,KAClByD,EAAc,EAAQ,KAC5B,MAAMD,UAAiBC,EAAY3D,UAC/BvD,YAAY4D,GACR3D,MAAM2D,GACN1D,KAAK0D,OAASA,CAClB,CACAyC,WACI,MAAMH,EAAShG,KAAKgD,YAAcP,EAAQF,UAAUI,KAAO,EAAI,EAC1D3C,KAAK6E,QAAQnF,MAAMsG,OAIpBhG,KAAKoG,OACDpG,KAAK6E,QAAQnF,MAAMsG,SAAWA,EACxBzC,EAAQO,YAAYyC,QACpBhD,EAAQO,YAAY2C,MAN9BzG,KAAKoG,OAAS7C,EAAQO,YAAYC,OAQlC/D,KAAKoG,SAAW7C,EAAQO,YAAY2C,QACpCzG,KAAK6G,aAAe,SAGxB9G,MAAMoG,UACV,EAEJ1G,EAAQsH,SAAWA,C,gBC5BnBxH,OAAOC,eAAeC,EAAS,aAAc,CAAEC,OAAO,IACtDD,EAAQwH,yBAAsB,EAC9B,MAAMxE,EAAU,EAAQ,KAClBuE,EAAc,EAAQ,KAC5B,MAAMC,UAA4BD,EAAY3D,UAC1CvD,YAAY4D,GACR3D,MAAM2D,GACN1D,KAAK0D,OAASA,CAClB,CACAyC,WACI,GAAKnG,KAAK0G,sBAAsBV,OAG3B,CACD,MAAMkB,EAAQ,IAAIC,KACZC,EAAc,yBACdC,GAAWH,EAAMI,cAAcC,WAAWrB,MAAM,EAAG,GACnDsB,GAAWN,EAAMI,cAAcC,WAAWrB,MAAM,EAAG,GAAK,GACxDuB,EAAYzH,KAAK6E,QAAQnF,MAAMiG,QAAQ,IAAK,IAAIO,MAAM,EAAG,GACzDwB,EAAW1H,KAAK6E,QAAQnF,MAAMiG,QAAQ,IAAK,IAAIO,MAAM,EAAG,GACxDyB,EAAoC,IAArBF,EAAUzB,QAAgBoB,EAAYhE,KAAKqE,GAC1DG,EAAkC,IAApBF,EAAS1B,SAAiB0B,GAAYL,IAAYK,EAAWF,EAcjF,GAbAxH,KAAKoG,OACDuB,GAAgBC,EACVnF,EAAQqB,YAAYyC,QACpB9D,EAAQqB,YAAY2C,MAC1BzG,KAAKoG,SAAW3D,EAAQqB,YAAY2C,QACpCzG,KAAK6G,aAAe,QACfe,IACD5H,KAAK6G,aAAe,QAEnBc,IACD3H,KAAK6G,aAAe,SAGc,IAAtC7G,KAAK0G,sBAAsBV,OAAc,CACzC,MAAM6B,EAAW,IAAIV,KACrBU,EAASC,aAAa,KAAI,IAAIX,MACzBG,cACAC,WACArB,MAAM,EAAG,KAAKwB,KACnBG,EAASE,UAAUN,EAAY,GAC3BzH,KAAKgI,cAAcH,GAAY,IAC/B7H,KAAKoG,OAAS3D,EAAQqB,YAAY2C,MAClCzG,KAAK6G,aAAe,SAE5B,CACJ,MApCI7G,KAAKoG,OAAS3D,EAAQqB,YAAYC,OAqCtChE,MAAMoG,UACV,CACA6B,cAAcH,GACV,MAAMX,EAAQ,IAAIC,KAClB,OAAQU,EAASI,WACbf,EAAMe,WACN,IAAMJ,EAASP,cAAgBJ,EAAMI,cAC7C,CACAX,cACI5G,MAAM4G,cACN,MAAMuB,EAAQlI,KAAK6E,QAAQnF,MACtBiG,QAAQ,IAAK,IACbO,MAAM,EAAG,GACTiC,MAAM,WACXnI,KAAK6E,QAAQnF,MAAQwI,EAAQA,EAAMpC,KAAK,KAAO9F,KAAK6E,QAAQnF,KAChE,CACAgH,sBACI,OAAO1G,KAAK6E,QAAQnF,MAAMiG,QAAQ,IAAK,GAC3C,EAEJlG,EAAQwH,oBAAsBA,C,gBCpE9B1H,OAAOC,eAAeC,EAAS,aAAc,CAAEC,OAAO,IACtDD,EAAQ2I,iBAAc,EACtB,MAAM3F,EAAU,EAAQ,KAClB4F,EAAc,EAAQ,KACtB9E,EAAU,EAAQ,KAClByD,EAAc,EAAQ,KAC5B,MAAMoB,UAAoBpB,EAAY3D,UAClCvD,YAAY4D,GACR3D,MAAM2D,GACN1D,KAAK0D,OAASA,CAClB,CACAyC,WACI,MAAMzD,EAAW,CACb,CAACD,EAAQF,UAAUU,SAAU,cAC7B,CAACR,EAAQF,UAAUI,MAAO,mBAC1B,CAACF,EAAQF,UAAUK,MAAO,eAC1B,CAACH,EAAQF,UAAUM,YAAa,oBAChC,CAACJ,EAAQF,UAAUO,KAAM,gBACzB,CAACL,EAAQF,UAAUQ,UAAW,oBAE7B/C,KAAK6E,QAAQnF,MAAMsG,QAIpBhG,KAAKoG,OACD1D,EAAS1C,KAAKgD,WAAWI,KAAKpD,KAAK6E,QAAQnF,MAAMiG,QAAQ,MAAO,MAC5D3F,KAAKgD,YAAcP,EAAQF,UAAUI,MACrC3C,KAAKgD,YAAcP,EAAQF,UAAUQ,SACnCQ,EAAQO,YAAYyC,QACpBhD,EAAQO,YAAY2C,MAC1BzG,KAAKoG,SAAW7C,EAAQO,YAAY2C,QACpCzG,KAAK6G,aAAe,QAChB7G,KAAKgD,YAAcP,EAAQF,UAAUQ,WACrC/C,KAAK6G,aAAe,eAEpB7G,KAAKgD,YAAcP,EAAQF,UAAUI,OACrC3C,KAAK6G,aAAe,mBAf5B7G,KAAKoG,OAAS7C,EAAQO,YAAYC,OAmBtChE,MAAMoG,UACV,CACAQ,cACI5G,MAAM4G,cACN,MAAMuB,EAAQlI,KAAK6E,QAAQnF,MAAMiG,QAAQ,MAAO,IAAIwC,MAAM,WAC1DnI,KAAK6E,QAAQnF,MAAQwI,EAAQA,EAAMpC,KAAK,KAAO9F,KAAK6E,QAAQnF,KAChE,CACAgH,sBACI,OAAO1G,KAAK6E,QAAQnF,MAAMiG,QAAQ,MAAO,GAC7C,CACAhB,SAAS1C,GACLjC,KAAKgD,WAAY,EAAIqF,EAAY7F,cAAcP,EAAIF,OAAOrC,OAC1DM,KAAKwB,KAAK,oBAAqBxB,KAAKgD,WACpCjD,MAAM4E,SAAS1C,EACnB,EAEJxC,EAAQ2I,YAAcA,C,cCrDtB,IAAWtE,EAHXvE,OAAOC,eAAeC,EAAS,aAAc,CAAEC,OAAO,IACtDD,EAAQqE,iBAAc,GAEXA,EAIMrE,EAAQqE,cAAgBrE,EAAQqE,YAAc,CAAC,IAHhDA,EAAoB,OAAI,GAAK,SACzCA,EAAYA,EAAqB,QAAI,GAAK,UAC1CA,EAAYA,EAAmB,OAAK,GAAK,O,sBCN7C,IAAIwE,EAAatI,MAAQA,KAAKsI,WAAc,SAAUC,EAASC,EAAYC,EAAGC,GAE1E,OAAO,IAAKD,IAAMA,EAAIE,WAAU,SAAUC,EAASC,GAC/C,SAASC,EAAUpJ,GAAS,IAAMqJ,EAAKL,EAAUM,KAAKtJ,GAAkC,CAAvB,MAAOuJ,GAAKJ,EAAOI,EAAI,CAAE,CAC1F,SAASC,EAASxJ,GAAS,IAAMqJ,EAAKL,EAAiB,MAAEhJ,GAAkC,CAAvB,MAAOuJ,GAAKJ,EAAOI,EAAI,CAAE,CAC7F,SAASF,EAAK7D,GAJlB,IAAexF,EAIawF,EAAOiE,KAAOP,EAAQ1D,EAAOxF,QAJ1CA,EAIyDwF,EAAOxF,MAJhDA,aAAiB+I,EAAI/I,EAAQ,IAAI+I,GAAE,SAAUG,GAAWA,EAAQlJ,EAAQ,KAIjBuF,KAAK6D,EAAWI,EAAW,CAC7GH,GAAML,EAAYA,EAAUU,MAAMb,EAASC,GAAc,KAAKQ,OAClE,GACJ,EACAzJ,OAAOC,eAAeC,EAAS,aAAc,CAAEC,OAAO,IACtDD,EAAQuF,iBAAc,EACtB,MAAMvB,EAAW,EAAQ,KAiBzBhE,EAAQuF,YAhBaxE,GAAS8H,OAAU,OAAQ,OAAQ,GAAQ,YAC5D,IACI,MAAMe,EAAa,GAAG5F,EAAS9D,OAAOoF,cAAclE,oCAC9CyI,QAAiBC,MAAMF,EAAY,CACrCG,KAAMC,KAAKC,UAAUlJ,GACrBmJ,OAAQ,OACRC,QAAS,CACL,eAAgB,sBAGxB,OAAOjB,QAAQC,QAAQU,EAASO,OAIpC,CAFA,MAAOC,GACH,OAAOnB,QAAQE,OAAOiB,EAC1B,CACJ,G,GC3BIC,EAA2B,CAAC,EAGhC,SAASC,EAAoBC,GAE5B,IAAIC,EAAeH,EAAyBE,GAC5C,QAAqBE,IAAjBD,EACH,OAAOA,EAAazK,QAGrB,IAAI2K,EAASL,EAAyBE,GAAY,CAGjDxK,QAAS,CAAC,GAOX,OAHA4K,EAAoBJ,GAAUK,KAAKF,EAAO3K,QAAS2K,EAAQA,EAAO3K,QAASuK,GAGpEI,EAAO3K,OACf,C,MCpBA,MAAM8K,EAAgB,EAAQ,KACxBC,EAAwB,EAAQ,KAChCC,EAAa,EAAQ,IAC3BnG,SAAStC,iBAAiB,oBAAoB,KAC1C,IAAK2B,OAAO+G,SAASC,OAAO3E,OACxB,OACJ,MAAMtC,EAAS+F,KAAKmB,MAAMC,mBAAmBlH,OAAO+G,SAASC,OAAOhF,QAAQ,IAAK,MAMjF,IAAImF,EALJ,GAAGpJ,QAAQ4I,KAAKhG,SAASyG,iBAAiB,SAAUC,IAC5CA,EAAK5G,KAAO,GAAGV,EAAOxB,aACtB8I,EAAK1E,QACT,IAGgB,WAAhB5C,EAAOxB,OACP4I,EAAe,IAAIP,EAAcnC,YAAY1E,IAE7B,mBAAhBA,EAAOxB,OACP4I,EAAe,IAAIN,EAAsBvD,oBAAoBvD,IAE7C,QAAhBA,EAAOxB,OACP4I,EAAe,IAAIL,EAAW1D,SAASrD,GAC3C,G","sources":["webpack://91app-payment-sdk/./src/config/index.ts","webpack://91app-payment-sdk/./src/events/eventEmitter.ts","webpack://91app-payment-sdk/./src/events/postMessageEmitter.ts","webpack://91app-payment-sdk/./src/payments/creditCard/enums/index.ts","webpack://91app-payment-sdk/./src/payments/creditCard/utilities/index.ts","webpack://91app-payment-sdk/./src/payments/fields/components/baseField.ts","webpack://91app-payment-sdk/./src/payments/fields/components/ccvField.ts","webpack://91app-payment-sdk/./src/payments/fields/components/expirationDateField.ts","webpack://91app-payment-sdk/./src/payments/fields/components/numberField.ts","webpack://91app-payment-sdk/./src/payments/fields/enums/index.ts","webpack://91app-payment-sdk/./src/services/creditCard.service.ts","webpack://91app-payment-sdk/webpack/bootstrap","webpack://91app-payment-sdk/./src/payments/fields/index.ts"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Config = void 0;\nconst eventEmitter_1 = require(\"@/src/events/eventEmitter\");\nclass Config extends eventEmitter_1.EventEmitter {\n    constructor() {\n        super();\n        this._clientData = null;\n        this._origin = {\n            sandbox: 'https://gadget.payment.qa.91dev.tw',\n            production: 'https://gadget.payment.91app.com',\n        };\n    }\n    static getInstance() {\n        if (!Config._instance)\n            Config._instance = new Config();\n        return Config._instance;\n    }\n    set clientData(data) {\n        this._clientData = Object.assign({}, data);\n    }\n    get clientData() {\n        return this._clientData;\n    }\n    get version() {\n        return process.env.VERSION;\n    }\n    get origin() {\n        return process.env.NODE_ENV === 'development'\n            ? '*'\n            : this._origin[this.clientData.serverType];\n    }\n    get apiDomain() {\n        return this._origin[this.clientData.serverType];\n    }\n    get iframeDomain() {\n        return process.env.NODE_ENV === 'development'\n            ? 'http://localhost:8001'\n            : `./${this.version}`;\n    }\n}\nexports.Config = Config;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EventEmitter = void 0;\nclass EventEmitter {\n    constructor() {\n        this.listeners = new Map();\n    }\n    on(event, callback) {\n        if (!this.listeners.has(event)) {\n            this.listeners.set(event, [callback]);\n        }\n        else {\n            this.listeners.get(event).push(callback);\n        }\n    }\n    emit(event, payload) {\n        if (!this.listeners.has(event))\n            return;\n        const callbacks = this.listeners.get(event);\n        callbacks.forEach((callback) => {\n            callback(payload);\n        });\n    }\n    off(event) {\n        if (this.listeners.has(event)) {\n            this.listeners.delete(event);\n        }\n    }\n}\nexports.EventEmitter = EventEmitter;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PostMessageEmitter = void 0;\nclass PostMessageEmitter {\n    constructor(current, target, origin) {\n        this.current = current;\n        this.target = target;\n        this.origin = origin;\n        this.listeners = new Map();\n        this.current.addEventListener('message', (evt) => {\n            const { type, payload } = evt.data;\n            if (this.listeners.get(type)) {\n                const callbacks = this.listeners.get(type);\n                callbacks.forEach((callback) => {\n                    callback(payload);\n                });\n            }\n        });\n    }\n    on(event, callback) {\n        if (!this.listeners.get(event)) {\n            this.listeners.set(event, [callback]);\n        }\n    }\n    emit(event, payload) {\n        const message = {\n            type: event,\n            payload,\n        };\n        this.target.postMessage(message, this.origin);\n    }\n    registerEvent(event) {\n        const eventBinder = (handler) => {\n            return this.on(event, handler);\n        };\n        return eventBinder;\n    }\n}\nexports.PostMessageEmitter = PostMessageEmitter;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CardBrand = void 0;\nvar CardBrand;\n(function (CardBrand) {\n    CardBrand[\"Unknown\"] = \"Unknown\";\n    CardBrand[\"MasterCard\"] = \"MasterCard\";\n    CardBrand[\"VISA\"] = \"VISA\";\n    CardBrand[\"JCB\"] = \"JCB\";\n    CardBrand[\"AMEX\"] = \"AMEX\";\n    CardBrand[\"UnionPay\"] = \"UnionPay\";\n})(CardBrand = exports.CardBrand || (exports.CardBrand = {}));\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getCardBrand = void 0;\nconst enums_1 = require(\"@/payments/creditCard/enums\");\nconst getCardBrand = (value) => {\n    const patterns = {\n        [enums_1.CardBrand.AMEX]: /^3[47]/,\n        [enums_1.CardBrand.VISA]: /^4/,\n        [enums_1.CardBrand.MasterCard]: /^5[1-5]/,\n        [enums_1.CardBrand.JCB]: /^35/,\n        [enums_1.CardBrand.UnionPay]: /^62/,\n    };\n    let cardBrand = enums_1.CardBrand.Unknown;\n    Object.keys(patterns).forEach((key) => {\n        if (patterns[key].test(value))\n            cardBrand = key;\n    });\n    return cardBrand;\n};\nexports.getCardBrand = getCardBrand;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BaseField = void 0;\nconst postMessageEmitter_1 = require(\"@/src/events/postMessageEmitter\");\nconst enums_1 = require(\"@/payments/creditCard/enums\");\nconst enums_2 = require(\"@/payments/fields/enums\");\nconst creditCard_service_1 = require(\"@/src/services/creditCard.service\");\nconst config_1 = require(\"@/src/config\");\nclass BaseField extends postMessageEmitter_1.PostMessageEmitter {\n    constructor(params) {\n        super(window, window.parent, '*');\n        this.params = params;\n        this._status = enums_2.FieldStatus.Normal;\n        this._cardBrand = enums_1.CardBrand.Unknown;\n        this._errorMessage = '';\n        this.createStyleSheet = this.createStyleSheet.bind(this);\n        const id = `field-${params.type}`;\n        this._element = document.getElementById(id);\n        if (params.placeholder) {\n            this._element.placeholder = params.placeholder;\n        }\n        this._element.addEventListener('foucs', this.onFocus.bind(this));\n        this._element.addEventListener('blur', this.onBlur.bind(this));\n        this._element.addEventListener('input', this.onChange.bind(this));\n        this.listenParentMessage();\n        this.createStyleSheet();\n    }\n    listenParentMessage() {\n        this.on('FOCUS_FIELD', () => this.element.focus());\n        this.on('SYNC_CLIENT', (clientData) => {\n            config_1.Config.getInstance().clientData = clientData;\n        });\n        this.on('SYNC_CARD_BRAND', (cardBrand) => {\n            this.cardBrand = cardBrand;\n        });\n        this.on('GET_TOKEN', (data) => {\n            (0, creditCard_service_1.getTxnToken)(data).then((result) => {\n                this.emit('GET_TOKEN_COMPLETED', result);\n            });\n        });\n    }\n    createStyleSheet() {\n        const styleSheet = document.styleSheets[0];\n        Object.entries(this.params.styles).forEach(([key, style]) => {\n            const formatStyle = Object.entries(style).map(([name, value]) => {\n                const styleKey = name\n                    .replace(/([A-Z]+)*([A-Z][a-z])/g, '$1-$2')\n                    .toLowerCase();\n                return `${styleKey}:${value}`;\n            });\n            styleSheet.insertRule(`${key}{${formatStyle.join(';')}}`, styleSheet.cssRules.length);\n        });\n    }\n    removeUnlegalCharacter() {\n        const isLegal = /^[0-9\\s/]+$/;\n        if (!isLegal.test(this._element.value)) {\n            this._element.value = this._element.value.slice(0, -1);\n        }\n    }\n    validate() {\n        if (this.status === enums_2.FieldStatus.Normal) {\n            this.element.classList.remove('invalid');\n            this.element.classList.remove('valid');\n        }\n        if (this.status === enums_2.FieldStatus.Success) {\n            this.element.classList.remove('invalid');\n            this.element.classList.add('valid');\n        }\n        if (this.status === enums_2.FieldStatus.Error) {\n            this.element.classList.remove('valid');\n            this.element.classList.add('invalid');\n        }\n    }\n    getUnformattedValue() {\n        return this.element.value;\n    }\n    formatValue() {\n        if (!this.element.value.length)\n            return;\n    }\n    onFocus(evt) { }\n    onBlur(evt) { }\n    onChange(evt) {\n        this.removeUnlegalCharacter();\n        this.validate();\n        this.formatValue();\n        const update = {\n            type: this.params.type,\n            status: this.status,\n            value: this.getUnformattedValue(),\n            errorMessage: this.errorMessage,\n        };\n        this.emit('UPDATE_FIELD', update);\n    }\n    get element() {\n        return this._element;\n    }\n    set status(status) {\n        this._status = status;\n    }\n    get status() {\n        return this._status;\n    }\n    get cardBrand() {\n        return this._cardBrand;\n    }\n    set cardBrand(brand) {\n        this._cardBrand = brand;\n    }\n    set errorMessage(message) {\n        this._errorMessage = message;\n    }\n    get errorMessage() {\n        return this.status === enums_2.FieldStatus.Error ? this._errorMessage : '';\n    }\n}\nexports.BaseField = BaseField;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CCVField = void 0;\nconst enums_1 = require(\"@/payments/creditCard/enums\");\nconst enums_2 = require(\"@/payments/fields/enums\");\nconst baseField_1 = require(\"@/payments/fields/components/baseField\");\nclass CCVField extends baseField_1.BaseField {\n    constructor(params) {\n        super(params);\n        this.params = params;\n    }\n    validate() {\n        const length = this.cardBrand === enums_1.CardBrand.AMEX ? 4 : 3;\n        if (!this.element.value.length) {\n            this.status = enums_2.FieldStatus.Normal;\n        }\n        else {\n            this.status =\n                this.element.value.length === length\n                    ? enums_2.FieldStatus.Success\n                    : enums_2.FieldStatus.Error;\n        }\n        if (this.status === enums_2.FieldStatus.Error) {\n            this.errorMessage = '未填寫完成';\n        }\n        ;\n        super.validate();\n    }\n}\nexports.CCVField = CCVField;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ExpirationDateField = void 0;\nconst enums_1 = require(\"@/payments/fields/enums\");\nconst baseField_1 = require(\"@/payments/fields/components/baseField\");\nclass ExpirationDateField extends baseField_1.BaseField {\n    constructor(params) {\n        super(params);\n        this.params = params;\n    }\n    validate() {\n        if (!this.getUnformattedValue().length) {\n            this.status = enums_1.FieldStatus.Normal;\n        }\n        else {\n            const today = new Date();\n            const monthParten = /(^0?[1-9]$)|(^1[0-2]$)/;\n            const minYear = +today.getFullYear().toString().slice(2, 4);\n            const maxYear = +today.getFullYear().toString().slice(2, 4) + 30;\n            const cardMonth = this.element.value.replace('/', '').slice(0, 2);\n            const cardYear = this.element.value.replace('/', '').slice(2, 4);\n            const isMonthVaild = cardMonth.length === 2 && monthParten.test(cardMonth);\n            const isYearVaild = cardYear.length === 2 && +cardYear >= minYear && +cardYear < maxYear;\n            this.status =\n                isMonthVaild && isYearVaild\n                    ? enums_1.FieldStatus.Success\n                    : enums_1.FieldStatus.Error;\n            if (this.status === enums_1.FieldStatus.Error) {\n                this.errorMessage = '未填寫完成';\n                if (!isYearVaild) {\n                    this.errorMessage = '年份錯誤';\n                }\n                if (!isMonthVaild) {\n                    this.errorMessage = '月份錯誤';\n                }\n            }\n            if (this.getUnformattedValue().length === 4) {\n                const cardDate = new Date();\n                cardDate.setFullYear(+`${+new Date()\n                    .getFullYear()\n                    .toString()\n                    .slice(0, 2)}${cardYear}`);\n                cardDate.setMonth(+cardMonth - 1);\n                if (this.getDiffMonths(cardDate) < 0) {\n                    this.status = enums_1.FieldStatus.Error;\n                    this.errorMessage = '已超過到期日';\n                }\n            }\n        }\n        super.validate();\n    }\n    getDiffMonths(cardDate) {\n        const today = new Date();\n        return (cardDate.getMonth() -\n            today.getMonth() +\n            12 * (cardDate.getFullYear() - today.getFullYear()));\n    }\n    formatValue() {\n        super.formatValue();\n        const split = this.element.value\n            .replace('/', '')\n            .slice(0, 4)\n            .match(/.{1,2}/g);\n        this.element.value = split ? split.join('/') : this.element.value;\n    }\n    getUnformattedValue() {\n        return this.element.value.replace('/', '');\n    }\n}\nexports.ExpirationDateField = ExpirationDateField;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NumberField = void 0;\nconst enums_1 = require(\"@/payments/creditCard/enums\");\nconst utilities_1 = require(\"@/payments/creditCard/utilities\");\nconst enums_2 = require(\"@/payments/fields/enums\");\nconst baseField_1 = require(\"@/payments/fields/components/baseField\");\nclass NumberField extends baseField_1.BaseField {\n    constructor(params) {\n        super(params);\n        this.params = params;\n    }\n    validate() {\n        const patterns = {\n            [enums_1.CardBrand.Unknown]: /^[0-9]{18}$/,\n            [enums_1.CardBrand.AMEX]: /^3[47][0-9]{13}$/,\n            [enums_1.CardBrand.VISA]: /^4[0-9]{15}$/,\n            [enums_1.CardBrand.MasterCard]: /^5[1-5][0-9]{14}$/,\n            [enums_1.CardBrand.JCB]: /^35[0-9]{14}$/,\n            [enums_1.CardBrand.UnionPay]: /^62[0-9]{14,17}$/,\n        };\n        if (!this.element.value.length) {\n            this.status = enums_2.FieldStatus.Normal;\n        }\n        else {\n            this.status =\n                patterns[this.cardBrand].test(this.element.value.replace(/\\s/g, '')) &&\n                    this.cardBrand !== enums_1.CardBrand.AMEX &&\n                    this.cardBrand !== enums_1.CardBrand.UnionPay\n                    ? enums_2.FieldStatus.Success\n                    : enums_2.FieldStatus.Error;\n            if (this.status === enums_2.FieldStatus.Error) {\n                this.errorMessage = '未填寫完成';\n                if (this.cardBrand === enums_1.CardBrand.UnionPay) {\n                    this.errorMessage = '暫不支援銀聯信用卡交易';\n                }\n                if (this.cardBrand === enums_1.CardBrand.AMEX) {\n                    this.errorMessage = '暫不支援美國運通信用卡交易';\n                }\n            }\n        }\n        super.validate();\n    }\n    formatValue() {\n        super.formatValue();\n        const split = this.element.value.replace(/\\s/g, '').match(/.{1,4}/g);\n        this.element.value = split ? split.join(' ') : this.element.value;\n    }\n    getUnformattedValue() {\n        return this.element.value.replace(/\\s/g, '');\n    }\n    onChange(evt) {\n        this.cardBrand = (0, utilities_1.getCardBrand)(evt.target.value);\n        this.emit('UPDATE_CARD_BRAND', this.cardBrand);\n        super.onChange(evt);\n    }\n}\nexports.NumberField = NumberField;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FieldStatus = void 0;\nvar FieldStatus;\n(function (FieldStatus) {\n    FieldStatus[FieldStatus[\"Normal\"] = 0] = \"Normal\";\n    FieldStatus[FieldStatus[\"Success\"] = 1] = \"Success\";\n    FieldStatus[FieldStatus[\"Error\"] = -1] = \"Error\";\n})(FieldStatus = exports.FieldStatus || (exports.FieldStatus = {}));\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getTxnToken = void 0;\nconst config_1 = require(\"../config\");\nconst getTxnToken = (data) => __awaiter(void 0, void 0, void 0, function* () {\n    try {\n        const requestUrl = `${config_1.Config.getInstance().apiDomain}/api/Payment/GetTxnToken`;\n        const response = yield fetch(requestUrl, {\n            body: JSON.stringify(data),\n            method: 'POST',\n            headers: {\n                'content-type': 'application/json',\n            },\n        });\n        return Promise.resolve(response.json());\n    }\n    catch (error) {\n        return Promise.reject(error);\n    }\n});\nexports.getTxnToken = getTxnToken;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst numberField_1 = require(\"@/payments/fields/components/numberField\");\nconst expirationDateField_1 = require(\"@/payments/fields/components/expirationDateField\");\nconst ccvField_1 = require(\"@/payments/fields/components/ccvField\");\ndocument.addEventListener('DOMContentLoaded', () => {\n    if (!window.location.search.length)\n        return;\n    const params = JSON.parse(decodeURIComponent(window.location.search.replace('?', '')));\n    [].forEach.call(document.querySelectorAll('form'), (form) => {\n        if (form.id !== `${params.type}-form`) {\n            form.remove();\n        }\n    });\n    let currentField;\n    if (params.type === 'number') {\n        currentField = new numberField_1.NumberField(params);\n    }\n    if (params.type === 'expirationDate') {\n        currentField = new expirationDateField_1.ExpirationDateField(params);\n    }\n    if (params.type === 'ccv') {\n        currentField = new ccvField_1.CCVField(params);\n    }\n});\n"],"names":["Object","defineProperty","exports","value","Config","eventEmitter_1","EventEmitter","constructor","super","this","_clientData","_origin","sandbox","production","static","_instance","clientData","data","assign","version","origin","serverType","apiDomain","iframeDomain","listeners","Map","on","event","callback","has","get","push","set","emit","payload","forEach","off","delete","PostMessageEmitter","current","target","addEventListener","evt","type","message","postMessage","registerEvent","handler","CardBrand","getCardBrand","enums_1","patterns","AMEX","VISA","MasterCard","JCB","UnionPay","cardBrand","Unknown","keys","key","test","BaseField","postMessageEmitter_1","enums_2","creditCard_service_1","config_1","params","window","parent","_status","FieldStatus","Normal","_cardBrand","_errorMessage","createStyleSheet","bind","id","_element","document","getElementById","placeholder","onFocus","onBlur","onChange","listenParentMessage","element","focus","getInstance","getTxnToken","then","result","styleSheet","styleSheets","entries","styles","style","formatStyle","map","name","replace","toLowerCase","insertRule","join","cssRules","length","removeUnlegalCharacter","slice","validate","status","classList","remove","Success","add","Error","getUnformattedValue","formatValue","update","errorMessage","brand","CCVField","baseField_1","ExpirationDateField","today","Date","monthParten","minYear","getFullYear","toString","maxYear","cardMonth","cardYear","isMonthVaild","isYearVaild","cardDate","setFullYear","setMonth","getDiffMonths","getMonth","split","match","NumberField","utilities_1","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","done","apply","requestUrl","response","fetch","body","JSON","stringify","method","headers","json","error","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","module","__webpack_modules__","call","numberField_1","expirationDateField_1","ccvField_1","location","search","parse","decodeURIComponent","currentField","querySelectorAll","form"],"sourceRoot":""}