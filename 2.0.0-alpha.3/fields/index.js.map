{"version":3,"file":"fields/index.js?t=ea721c7499516be37530","mappings":"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","sources":["webpack://91app-payment-sdk/./src/config/index.ts","webpack://91app-payment-sdk/./src/events/eventEmitter.ts","webpack://91app-payment-sdk/./src/events/postMessageEmitter.ts","webpack://91app-payment-sdk/./src/payments/creditCard/enums/index.ts","webpack://91app-payment-sdk/./src/payments/creditCard/utilities/index.ts","webpack://91app-payment-sdk/./src/payments/fields/components/baseField.ts","webpack://91app-payment-sdk/./src/payments/fields/components/ccvField.ts","webpack://91app-payment-sdk/./src/payments/fields/components/expirationDateField.ts","webpack://91app-payment-sdk/./src/payments/fields/components/numberField.ts","webpack://91app-payment-sdk/./src/payments/fields/enums/index.ts","webpack://91app-payment-sdk/./src/services/creditCard.service.ts","webpack://91app-payment-sdk/webpack/bootstrap","webpack://91app-payment-sdk/./src/payments/fields/index.ts"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Config = void 0;\nconst eventEmitter_1 = require(\"@/src/events/eventEmitter\");\nclass Config extends eventEmitter_1.EventEmitter {\n    constructor() {\n        super();\n        this._clientData = null;\n        this._origin = {\n            sandbox: 'https://gadget.payment.qa.91dev.tw',\n            production: 'https://gadget.payment.91app.com',\n        };\n    }\n    static getInstance() {\n        if (!Config._instance)\n            Config._instance = new Config();\n        return Config._instance;\n    }\n    set clientData(data) {\n        this._clientData = Object.assign({}, data);\n    }\n    get clientData() {\n        return this._clientData;\n    }\n    get version() {\n        return process.env.VERSION;\n    }\n    get origin() {\n        return process.env.NODE_ENV === 'development'\n            ? '*'\n            : this._origin[this.clientData.serverType];\n    }\n    get apiDomain() {\n        return this._origin[this.clientData.serverType];\n    }\n    get iframeDomain() {\n        return process.env.NODE_ENV === 'development'\n            ? 'http://localhost:8001'\n            : `./${this.version}`;\n    }\n}\nexports.Config = Config;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EventEmitter = void 0;\nclass Listener {\n    constructor(owner, event, callback) {\n        this.owner = owner;\n        this.event = event;\n        this.callback = callback;\n    }\n}\nclass EventEmitter {\n    constructor() {\n        this.listeners = new Map();\n    }\n    addListener(event, callback) {\n        if (!this.listeners.has(event)) {\n            this.listeners.set(event, callback);\n        }\n        return new Listener(this, event, callback);\n    }\n    off() {\n        if (arguments.length === 0)\n            this.listeners.clear();\n        if (arguments.length === 1 && typeof arguments[0] === 'object') {\n            const listener = arguments[0];\n            this.off(listener.event, listener.callback);\n        }\n        else {\n            const [event, _listener] = Array.from(arguments);\n            if (this.listeners.has(event))\n                this.listeners.delete(event);\n        }\n    }\n    emit(event, payload) {\n        if (this.listeners.has(event)) {\n            const callback = this.listeners.get(event);\n            if (callback)\n                callback(payload);\n        }\n    }\n    registerEvent() {\n        const eventBinder = (handler) => {\n            return this.addListener(eventBinder, handler);\n        };\n        return eventBinder;\n    }\n}\nexports.EventEmitter = EventEmitter;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PostMessageEmitter = void 0;\nclass PostMessageEmitter {\n    constructor(target, origin) {\n        this.target = target;\n        this.origin = origin;\n        this.listeners = new Map();\n        window.addEventListener('message', (evt) => {\n            const { type, payload } = evt.data;\n            if (this.listeners.get(type)) {\n                const callbacks = this.listeners.get(type);\n                callbacks.forEach((callback) => {\n                    callback(evt.data);\n                });\n            }\n        });\n    }\n    on(event, callback) {\n        if (!this.listeners.get(event)) {\n            this.listeners.set(event, [callback]);\n        }\n    }\n    emit(event, payload) {\n        const message = {\n            type: event,\n            payload,\n        };\n        this.target.postMessage(message, this.origin);\n    }\n    registerEvent(event) {\n        const eventBinder = (handler) => {\n            return this.on(event, handler);\n        };\n        return eventBinder;\n    }\n}\nexports.PostMessageEmitter = PostMessageEmitter;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CardBrand = void 0;\nvar CardBrand;\n(function (CardBrand) {\n    CardBrand[\"Unknown\"] = \"Unknown\";\n    CardBrand[\"MasterCard\"] = \"MasterCard\";\n    CardBrand[\"VISA\"] = \"VISA\";\n    CardBrand[\"JCB\"] = \"JCB\";\n    CardBrand[\"AMEX\"] = \"AMEX\";\n    CardBrand[\"UnionPay\"] = \"UnionPay\";\n})(CardBrand = exports.CardBrand || (exports.CardBrand = {}));\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getCardBrand = void 0;\nconst enums_1 = require(\"@/payments/creditCard/enums\");\nconst getCardBrand = (value) => {\n    const patterns = {\n        [enums_1.CardBrand.AMEX]: /^3[47][0-9]{13}$/,\n        [enums_1.CardBrand.VISA]: /^4/,\n        [enums_1.CardBrand.MasterCard]: /^5[1-5]/,\n        [enums_1.CardBrand.JCB]: /^35/,\n        [enums_1.CardBrand.UnionPay]: /^62/,\n    };\n    let cardBrand = enums_1.CardBrand.Unknown;\n    Object.keys(patterns).forEach((key) => {\n        if (patterns[key].test(value))\n            cardBrand = key;\n    });\n    return cardBrand;\n};\nexports.getCardBrand = getCardBrand;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.BaseField = void 0;\nconst postMessageEmitter_1 = require(\"@/src/events/postMessageEmitter\");\nconst enums_1 = require(\"@/payments/creditCard/enums\");\nconst enums_2 = require(\"@/payments/fields/enums\");\nconst config_1 = require(\"@/src/config\");\nconst creditCard_service_1 = require(\"@/src/services/creditCard.service\");\nclass BaseField extends postMessageEmitter_1.PostMessageEmitter {\n    constructor(params) {\n        super(window.parent, '*');\n        this.params = params;\n        this.onSyncClientData = this.registerEvent('SYNC_CLIENT_DATA');\n        this.onSyncCardBrand = this.registerEvent('SYNC_CARD_BRAND');\n        this.onGetToken = this.registerEvent('GET_TOKEN');\n        this._status = enums_2.FieldStatus.Normal;\n        this._cardBrand = enums_1.CardBrand.Unknown;\n        this._element = document.getElementById(`field-${params.type}`);\n        if (params.placeholder) {\n            this._element.placeholder = params.placeholder;\n        }\n        this._element.addEventListener('foucs', this.onFocus.bind(this));\n        this._element.addEventListener('blur', this.onBlur.bind(this));\n        this._element.addEventListener('input', this.onChange.bind(this));\n        this.onSyncClientData((result) => {\n            config_1.Config.getInstance().clientData = result.payload;\n        });\n        this.onSyncCardBrand((result) => {\n            this.cardBrand = result.payload;\n        });\n        this.onGetToken((result) => {\n            (0, creditCard_service_1.getTxnToken)(result.payload).then((result) => {\n                this.emit('ON_GET_TOKEN_COMPLETED', result);\n            });\n        });\n    }\n    removeUnlegalCharacter() {\n        const isNumber = /^[0-9\\b]+$/;\n        if (!isNumber.test(this._element.value)) {\n            this._element.value = this._element.value.slice(0, -1);\n        }\n    }\n    validate() {\n        if (this.status === enums_2.FieldStatus.Success) {\n            this.element.classList.remove('invalid');\n            this.element.classList.add('valid');\n        }\n        if (this.status === enums_2.FieldStatus.Error) {\n            this.element.classList.remove('valid');\n            this.element.classList.add('invalid');\n        }\n    }\n    onFocus(evt) { }\n    onBlur(evt) { }\n    onChange(evt) {\n        this.removeUnlegalCharacter();\n        this.validate();\n        const update = {\n            type: this.params.type,\n            status: this.status,\n            value: evt.target.value,\n        };\n        this.emit('ON_UPDATE', update);\n    }\n    get element() {\n        return this._element;\n    }\n    set status(status) {\n        this._status = status;\n    }\n    get status() {\n        return this._status;\n    }\n    get cardBrand() {\n        return this._cardBrand;\n    }\n    set cardBrand(brand) {\n        this._cardBrand = brand;\n    }\n}\nexports.BaseField = BaseField;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.CCVField = void 0;\nconst enums_1 = require(\"@/payments/creditCard/enums\");\nconst enums_2 = require(\"@/payments/fields/enums\");\nconst baseField_1 = require(\"@/payments/fields/components/baseField\");\nclass CCVField extends baseField_1.BaseField {\n    constructor(params) {\n        super(params);\n        this.params = params;\n    }\n    validate() {\n        const length = this.cardBrand === enums_1.CardBrand.AMEX ? 4 : 3;\n        this.status =\n            this.element.value.length === length\n                ? enums_2.FieldStatus.Success\n                : enums_2.FieldStatus.Error;\n        super.validate();\n    }\n}\nexports.CCVField = CCVField;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ExpirationDateField = void 0;\nconst enums_1 = require(\"@/payments/fields/enums\");\nconst baseField_1 = require(\"@/payments/fields/components/baseField\");\nclass ExpirationDateField extends baseField_1.BaseField {\n    constructor(params) {\n        super(params);\n        this.params = params;\n    }\n    validate() {\n        const month = this.element.value.slice(0, 2);\n        const monthParten = /(^0?[1-9]$)|(^1[0-2]$)/;\n        const year = this.element.value.slice(2, 4);\n        const minYear = +new Date().getFullYear().toString().slice(2, 4);\n        const maxYear = +new Date().getFullYear().toString().slice(2, 4) + 30;\n        this.status =\n            monthParten.test(month) && +year >= minYear && +year < maxYear\n                ? enums_1.FieldStatus.Success\n                : enums_1.FieldStatus.Error;\n        super.validate();\n    }\n}\nexports.ExpirationDateField = ExpirationDateField;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.NumberField = void 0;\nconst enums_1 = require(\"@/payments/creditCard/enums\");\nconst utilities_1 = require(\"@/payments/creditCard/utilities\");\nconst enums_2 = require(\"@/payments/fields/enums\");\nconst baseField_1 = require(\"@/payments/fields/components/baseField\");\nclass NumberField extends baseField_1.BaseField {\n    constructor(params) {\n        super(params);\n        this.params = params;\n    }\n    validate() {\n        const patterns = {\n            [enums_1.CardBrand.Unknown]: /^[0-9]{18}$/,\n            [enums_1.CardBrand.AMEX]: /^3[47][0-9]{13}$/,\n            [enums_1.CardBrand.VISA]: /^4[0-9]{15}$/,\n            [enums_1.CardBrand.MasterCard]: /^5[1-5][0-9]{14}$/,\n            [enums_1.CardBrand.JCB]: /^35[0-9]{14}$/,\n            [enums_1.CardBrand.UnionPay]: /^62[0-9]{14,17}$/,\n        };\n        this.status = patterns[this.cardBrand].test(this.element.value)\n            ? enums_2.FieldStatus.Success\n            : enums_2.FieldStatus.Error;\n        super.validate();\n    }\n    onChange(evt) {\n        this.cardBrand = (0, utilities_1.getCardBrand)(evt.target.value);\n        this.emit('UPDATE_CARD_BRAND', this.cardBrand);\n        super.onChange(evt);\n    }\n}\nexports.NumberField = NumberField;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.FieldStatus = void 0;\nvar FieldStatus;\n(function (FieldStatus) {\n    FieldStatus[FieldStatus[\"Normal\"] = 0] = \"Normal\";\n    FieldStatus[FieldStatus[\"Success\"] = 1] = \"Success\";\n    FieldStatus[FieldStatus[\"Error\"] = -1] = \"Error\";\n})(FieldStatus = exports.FieldStatus || (exports.FieldStatus = {}));\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.getTxnToken = void 0;\nconst config_1 = require(\"../config\");\nconst getTxnToken = (data) => __awaiter(void 0, void 0, void 0, function* () {\n    try {\n        const requestUrl = `${config_1.Config.getInstance().apiDomain}/api/Payment/GetTxnToken`;\n        const response = yield fetch(requestUrl, {\n            body: JSON.stringify(data),\n            method: 'POST',\n            headers: {\n                'content-type': 'application/json',\n            },\n        });\n        return Promise.resolve(response.json());\n    }\n    catch (error) {\n        return Promise.reject(error);\n    }\n});\nexports.getTxnToken = getTxnToken;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst numberField_1 = require(\"@/payments/fields/components/numberField\");\nconst expirationDateField_1 = require(\"@/payments/fields/components/expirationDateField\");\nconst ccvField_1 = require(\"@/payments/fields/components/ccvField\");\ndocument.addEventListener('DOMContentLoaded', () => {\n    if (!window.location.search.length)\n        return;\n    const params = JSON.parse(decodeURIComponent(window.location.search.replace('?', '')));\n    [].forEach.call(document.querySelectorAll('form'), (form) => {\n        if (form.id !== `${params.type}-form`) {\n            form.remove();\n        }\n    });\n    let currentField;\n    if (params.type === 'number') {\n        currentField = new numberField_1.NumberField(params);\n    }\n    if (params.type === 'expirationDate') {\n        currentField = new expirationDateField_1.ExpirationDateField(params);\n    }\n    if (params.type === 'ccv') {\n        currentField = new ccvField_1.CCVField(params);\n    }\n});\n"],"names":["Object","defineProperty","exports","value","Config","eventEmitter_1","EventEmitter","constructor","super","this","_clientData","_origin","sandbox","production","static","_instance","clientData","data","assign","version","origin","serverType","apiDomain","iframeDomain","Listener","owner","event","callback","listeners","Map","addListener","has","set","off","arguments","length","clear","listener","_listener","Array","from","delete","emit","payload","get","registerEvent","eventBinder","handler","PostMessageEmitter","target","window","addEventListener","evt","type","forEach","on","message","postMessage","CardBrand","getCardBrand","enums_1","patterns","AMEX","VISA","MasterCard","JCB","UnionPay","cardBrand","Unknown","keys","key","test","BaseField","postMessageEmitter_1","enums_2","config_1","creditCard_service_1","params","parent","onSyncClientData","onSyncCardBrand","onGetToken","_status","FieldStatus","Normal","_cardBrand","_element","document","getElementById","placeholder","onFocus","bind","onBlur","onChange","result","getInstance","getTxnToken","then","removeUnlegalCharacter","slice","validate","status","Success","element","classList","remove","add","Error","update","brand","CCVField","baseField_1","ExpirationDateField","month","year","minYear","Date","getFullYear","toString","maxYear","NumberField","utilities_1","__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","step","next","e","rejected","done","apply","requestUrl","response","fetch","body","JSON","stringify","method","headers","json","error","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","undefined","module","__webpack_modules__","call","numberField_1","expirationDateField_1","ccvField_1","location","search","parse","decodeURIComponent","replace","currentField","querySelectorAll","form","id"],"sourceRoot":""}